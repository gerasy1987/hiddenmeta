<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to hiddenmeta • hiddenmeta</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to hiddenmeta">
<meta property="og:description" content="hiddenmeta">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-WBZEYLFB3F"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WBZEYLFB3F');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hiddenmeta</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/hiddenmeta-base.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/read-study-params.html">Reading study parameters</a>
    </li>
    <li>
      <a href="../articles/meta-example.html">Simple meta-analysis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/background.html">Background</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="hiddenmeta-base_files/htmlwidgets-1.6.1/htmlwidgets.js"></script><link href="hiddenmeta-base_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="hiddenmeta-base_files/datatables-binding-0.27/datatables.js"></script><link href="hiddenmeta-base_files/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="hiddenmeta-base_files/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="hiddenmeta-base_files/dt-core-1.12.1/js/jquery.dataTables.min.js"></script><link href="hiddenmeta-base_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="hiddenmeta-base_files/crosstalk-1.2.0/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to hiddenmeta</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gerasy1987/hiddenmeta/blob/HEAD/vignettes/hiddenmeta-base.Rmd" class="external-link"><code>vignettes/hiddenmeta-base.Rmd</code></a></small>
      <div class="hidden name"><code>hiddenmeta-base.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="install-and-load-packages">Install and load packages<a class="anchor" aria-label="anchor" href="#install-and-load-packages"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"DeclareDesign"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"gerasy1987/hiddenmeta"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gsyunyaev.com/hiddenmeta/">hiddenmeta</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://declaredesign.org/r/declaredesign/" class="external-link">DeclareDesign</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-1--provide-study-design-features">Step 1. Provide study design features<a class="anchor" aria-label="anchor" href="#step-1--provide-study-design-features"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## STUDY 1</span></span>
<span><span class="va">study_1</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    pop <span class="op">=</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        handler <span class="op">=</span> <span class="va">get_study_population</span>,</span>
<span>        </span>
<span>        <span class="co"># network structure setup</span></span>
<span>        network_handler <span class="op">=</span> <span class="va">sim_block_network</span>,</span>
<span>        network_handler_args <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">1000</span>, K <span class="op">=</span> <span class="fl">2</span>, prev_K <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fl">.1</span>, hidden <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span>, rho_K <span class="op">=</span> <span class="fl">0</span>,</span>
<span>               p_edge_within <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.1</span><span class="op">)</span>, hidden <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span>,</span>
<span>               p_edge_between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fl">0.02</span>, hidden <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span>,</span>
<span>               directed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>        </span>
<span>        <span class="co"># groups</span></span>
<span>        group_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="st">"hidden"</span><span class="op">)</span>,</span>
<span>        </span>
<span>        <span class="co"># probability of visibility (show-up) for each group</span></span>
<span>        p_visible <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fl">1</span>, hidden <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span>,</span>
<span>        </span>
<span>        <span class="co"># probability of service utilization in hidden population</span></span>
<span>        <span class="co"># for service multiplier</span></span>
<span>        add_groups <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            service_use <span class="op">=</span> <span class="st">"rbinom(.N, 1, 0.25)"</span>,</span>
<span>            <span class="st">"paste0('loc_', 1:10) := lapply(rep(.2, times = 10), function(add) rbinom(.N, 1, 0.05 + hidden * add))"</span>,</span>
<span>            target <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>            <span class="st">"paste0('known_', 2:10) := lapply(2:10, function(x) rbinom(.N, 1, 0.3))"</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>    sample <span class="op">=</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        rds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_rds</span>,</span>
<span>                   <span class="co"># RDS parameters</span></span>
<span>                   sampling_variable <span class="op">=</span> <span class="st">"rds"</span>,</span>
<span>                   hidden_var <span class="op">=</span> <span class="st">"hidden"</span>, <span class="co"># default</span></span>
<span>                   n_seed <span class="op">=</span> <span class="fl">20</span>,</span>
<span>                   n_coupons <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                   add_seeds <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                   target_type <span class="op">=</span> <span class="st">"sample"</span>,</span>
<span>                   target_n_rds <span class="op">=</span> <span class="fl">60</span><span class="op">)</span>,</span>
<span>        tls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_tls</span>,</span>
<span>                   sampling_variable <span class="op">=</span> <span class="st">"tls"</span>,</span>
<span>                   hidden_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                   <span class="co"># TLS sampling parameters</span></span>
<span>                   target_n_clusters <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                   target_cluster_type <span class="op">=</span> <span class="st">"fixed"</span>,</span>
<span>                   target_per_cluster <span class="op">=</span> <span class="fl">15</span>,</span>
<span>                   clusters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        pps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_pps</span>,</span>
<span>                   sampling_variable <span class="op">=</span> <span class="st">"pps"</span>,</span>
<span>                   <span class="co"># prop sampling parameters</span></span>
<span>                   sampling_frame <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                   strata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                   cluster <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                   target_n_pps <span class="op">=</span> <span class="fl">150</span><span class="op">)</span>,</span>
<span>        rdsplus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_rds</span>,</span>
<span>                       sampling_variable <span class="op">=</span> <span class="st">"rdsplus"</span>,</span>
<span>                       hidden_var <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                       n_seed <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                       n_coupons <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                       n_waves <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                       target <span class="op">=</span> <span class="st">"waves"</span>,</span>
<span>                       target_n_rds <span class="op">=</span> <span class="fl">200</span>,</span>
<span>                       linktrace <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>    inquiries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_estimands</span>,</span>
<span>                     in_groups <span class="op">=</span> <span class="st">"^target$"</span>,</span>
<span>                     out_groups <span class="op">=</span> <span class="st">"^known$"</span>, </span>
<span>                     hidden_var <span class="op">=</span> <span class="st">"hidden"</span><span class="op">)</span>,</span>
<span>    estimators <span class="op">=</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        rds <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ss <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_ss</span>,</span>
<span>                         sampling_var <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                         hidden_var <span class="op">=</span> <span class="st">"target"</span>, <span class="co"># estimates prevalence withing RDS</span></span>
<span>                         n_coupons <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                         total <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>                         rds_prefix <span class="op">=</span> <span class="st">"rds"</span>,</span>
<span>                         label <span class="op">=</span> <span class="st">"ss"</span><span class="op">)</span>,</span>
<span>               sspse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_sspse</span>,</span>
<span>                            prior_mean <span class="op">=</span> <span class="fl">200</span>,</span>
<span>                            mcmc_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>interval <span class="op">=</span> <span class="fl">5</span>, burnin <span class="op">=</span> <span class="fl">2000</span>, samplesize <span class="op">=</span> <span class="fl">500</span><span class="op">)</span>,</span>
<span>                            total <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>                            rds_prefix <span class="op">=</span> <span class="st">"rds"</span>, </span>
<span>                            label <span class="op">=</span> <span class="st">"rds_sspse"</span><span class="op">)</span>,</span>
<span>               chords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_chords</span>, </span>
<span>                             type <span class="op">=</span> <span class="st">"mle"</span>,</span>
<span>                             seed_condition <span class="op">=</span> <span class="st">"rds_from == -999"</span>,</span>
<span>                             n_boot <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                             rds_prefix <span class="op">=</span> <span class="st">"rds"</span>,</span>
<span>                             label <span class="op">=</span> <span class="st">"rds_chords"</span><span class="op">)</span>,</span>
<span>               multiplier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_multiplier</span>, </span>
<span>                                 service_var <span class="op">=</span> <span class="st">"service_use"</span>,</span>
<span>                                 seed_condition <span class="op">=</span> <span class="st">"rds_from == -999"</span>,</span>
<span>                                 n_boot <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                                 rds_prefix <span class="op">=</span> <span class="st">"rds"</span>,</span>
<span>                                 label <span class="op">=</span> <span class="st">"rds_multi"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        tls <span class="op">=</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ht <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_ht</span>,</span>
<span>                         hidden_var <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                         weight_var <span class="op">=</span> <span class="st">"tls_weight"</span>,</span>
<span>                         survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">tls_loc_sampled</span>,</span>
<span>                         prefix <span class="op">=</span> <span class="st">"tls"</span>,</span>
<span>                         label <span class="op">=</span> <span class="st">"tls_ht"</span><span class="op">)</span>,</span>
<span>               nsum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_nsum</span>,</span>
<span>                           known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"known_"</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                           hidden <span class="op">=</span> <span class="st">"hidden_visible_out"</span>,</span>
<span>                           survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">tls_loc_sampled</span>,</span>
<span>                           n_boot <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                           prefix <span class="op">=</span> <span class="st">"tls"</span>,</span>
<span>                           label <span class="op">=</span> <span class="st">"tls_nsum"</span><span class="op">)</span>,</span>
<span>               recap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,</span>
<span>                            capture_parse <span class="op">=</span> </span>
<span>                              <span class="st">"strsplit(x = unique(na.omit(tls_locs_sampled)), split = ';')[[1]]"</span>,</span>
<span>                            <span class="co"># sample_condition = "tls == 1",</span></span>
<span>                            model <span class="op">=</span> <span class="st">"Mt"</span>,</span>
<span>                            hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                            label <span class="op">=</span> <span class="st">"tls_recap"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        pps <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ht <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_ht</span>,</span>
<span>                         hidden_var <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                         prefix <span class="op">=</span> <span class="st">"pps"</span>,</span>
<span>                         label <span class="op">=</span> <span class="st">"pps_ht"</span><span class="op">)</span>,</span>
<span>               nsum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_nsum</span>,</span>
<span>                           known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"known_"</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                           hidden <span class="op">=</span> <span class="st">"hidden_visible_out"</span>,</span>
<span>                           survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">pps_cluster</span> <span class="op">+</span> <span class="fu">strata</span><span class="op">(</span><span class="va">pps_strata</span><span class="op">)</span>,</span>
<span>                           n_boot <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                           prefix <span class="op">=</span> <span class="st">"pps"</span>,</span>
<span>                           label <span class="op">=</span> <span class="st">"pps_nsum"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        all <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>recap1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,</span>
<span>                             capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rds"</span>, <span class="st">"pps"</span><span class="op">)</span>,</span>
<span>                             model <span class="op">=</span> <span class="st">"Mt"</span>,</span>
<span>                             hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                             label <span class="op">=</span> <span class="st">"rds_pps_recap"</span><span class="op">)</span>,</span>
<span>               recap2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,</span>
<span>                             capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rds"</span><span class="op">)</span>,</span>
<span>                             capture_parse <span class="op">=</span> </span>
<span>                              <span class="st">"strsplit(x = unique(na.omit(tls_locs_sampled)), split = ';')[[1]]"</span>,</span>
<span>                             model <span class="op">=</span> <span class="st">"Mt"</span>,</span>
<span>                             hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                             label <span class="op">=</span> <span class="st">"rds_tls_recap"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        rdsplus <span class="op">=</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>link <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_linktrace</span>,</span>
<span>                           total <span class="op">=</span> <span class="fl">200</span>,</span>
<span>                           strata <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                           gibbs_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>n_samples <span class="op">=</span> <span class="fl">5L</span>, </span>
<span>                                               chain_samples <span class="op">=</span> <span class="fl">250L</span>, </span>
<span>                                               chain_burnin <span class="op">=</span> <span class="fl">50L</span><span class="op">)</span>,</span>
<span>                           priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>p_n <span class="op">=</span> <span class="fl">0L</span>, p_l <span class="op">=</span> <span class="fl">0.1</span>, p_b <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span>,</span>
<span>                           prefix <span class="op">=</span> <span class="st">"rdsplus"</span>,</span>
<span>                           label <span class="op">=</span> <span class="st">"link"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-2--declare-study-population-model">Step 2. Declare study population (M)odel<a class="anchor" aria-label="anchor" href="#step-2--declare-study-population-model"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># study_1 &lt;- study_designs$jhu_pakistan</span></span>
<span></span>
<span><span class="va">study_population</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_population</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">pop</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span></span>
<span><span class="va">example_pop</span> <span class="op">&lt;-</span> <span class="fu">study_population</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">example_pop</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">.N</span>, <span class="fl">1000</span><span class="op">)</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>  </span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span>options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scrollX <span class="op">=</span> <span class="cn">TRUE</span>, pageLength <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="simulated-population-network">Simulated population network<a class="anchor" aria-label="anchor" href="#simulated-population-network"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">example_pop</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/exposition.html" class="external-link">%$%</a></span> <span class="op">{</span></span>
<span>    <span class="fu">hiddenmeta</span><span class="fu">:::</span><span class="fu">retrieve_graph</span><span class="op">(</span><span class="va">links</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/set_vertex_attr.html" class="external-link">set_vertex_attr</a></span><span class="op">(</span><span class="st">"name"</span>, value <span class="op">=</span> <span class="va">name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/set_vertex_attr.html" class="external-link">set_vertex_attr</a></span><span class="op">(</span><span class="st">"type"</span>, value <span class="op">=</span> <span class="va">type</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span><span class="va">pal</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu">grDevices</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palette.html" class="external-link">palette.colors</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">type</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                            palette <span class="op">=</span> <span class="st">"Dark2"</span>,</span>
<span>                            recycle <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">`names&lt;-`</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">type</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">GGally</span><span class="fu">::</span><span class="fu"><a href="https://ggobi.github.io/ggally/reference/ggnet2.html" class="external-link">ggnet2</a></span><span class="op">(</span><span class="va">g</span>, mode <span class="op">=</span> <span class="st">"fruchtermanreingold"</span>,</span>
<span>               edge.alpha <span class="op">=</span> <span class="fl">.5</span>, edge.size <span class="op">=</span> <span class="fl">.2</span>, </span>
<span>               node.alpha <span class="op">=</span> <span class="fl">.9</span>, node.size <span class="op">=</span> <span class="fl">2.5</span>, node.color <span class="op">=</span> <span class="st">"type"</span>,</span>
<span>               palette <span class="op">=</span> <span class="va">pal</span>,</span>
<span>               color.legend <span class="op">=</span> <span class="st">"type"</span>,</span>
<span>               max_size <span class="op">=</span> <span class="fl">4</span>, shape <span class="op">=</span> <span class="fl">16</span>,</span>
<span>               legend.size <span class="op">=</span> <span class="fl">12</span>, legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_equal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="step-3--declare-study-inquiries-or-estimands">Step 3. Declare study (I)nquiries or Estimands<a class="anchor" aria-label="anchor" href="#step-3--declare-study-inquiries-or-estimands"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">study_estimands</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_inquiry</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">inquiries</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-4--declare-study-data-strategy-or-sampling">Step 4. Declare study (D)ata strategy or Sampling<a class="anchor" aria-label="anchor" href="#step-4--declare-study-data-strategy-or-sampling"></a>
</h2>
<p>The sampling procedures are additive in a sense that each procedure
appends several columns relevant to the sampling procedure and
particular draw based on population simulation, but does not change the
study population data frame (unless you specify
<code>drop_nonsampled = TRUE</code>).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">study_sample_rds</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_sampling</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">sample</span><span class="op">$</span><span class="va">rds</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">study_sample_pps</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_sampling</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">sample</span><span class="op">$</span><span class="va">pps</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">study_sample_tls</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_sampling</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">sample</span><span class="op">$</span><span class="va">tls</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">study_sample_rdsplus</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_sampling</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">sample</span><span class="op">$</span><span class="va">rdsplus</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-5--declare-study-answer-strategy-or-estimators">Step 5. Declare study (A)nswer strategy or estimators<a class="anchor" aria-label="anchor" href="#step-5--declare-study-answer-strategy-or-estimators"></a>
</h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">est_ss</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">rds</span><span class="op">$</span><span class="va">ss</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">est_sspse</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">rds</span><span class="op">$</span><span class="va">sspse</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">est_chords</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">rds</span><span class="op">$</span><span class="va">chords</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">est_multi</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">rds</span><span class="op">$</span><span class="va">multiplier</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">est_ht_pps</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">pps</span><span class="op">$</span><span class="va">ht</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">est_nsum_pps</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">pps</span><span class="op">$</span><span class="va">nsum</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">est_ht_tls</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">tls</span><span class="op">$</span><span class="va">ht</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">est_nsum_tls</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">tls</span><span class="op">$</span><span class="va">nsum</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">est_recap_tls</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">tls</span><span class="op">$</span><span class="va">recap</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">est_recap_rds_pps</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">all</span><span class="op">$</span><span class="va">recap1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">est_recap_rds_tls</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">all</span><span class="op">$</span><span class="va">recap2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">est_link</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html" class="external-link">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">rdsplus</span><span class="op">$</span><span class="va">link</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="step-6--declare-full-study">Step 6. Declare full study<a class="anchor" aria-label="anchor" href="#step-6--declare-full-study"></a>
</h2>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">study1</span> <span class="op">&lt;-</span> </span>
<span>  <span class="co"># model (population)</span></span>
<span>  <span class="va">study_population</span> <span class="op">+</span> </span>
<span>  <span class="co"># inquiries</span></span>
<span>  <span class="va">study_estimands</span> <span class="op">+</span> </span>
<span>  <span class="co"># data strategy (samples)</span></span>
<span>  <span class="va">study_sample_rds</span> <span class="op">+</span> <span class="va">study_sample_pps</span> <span class="op">+</span> <span class="va">study_sample_tls</span> <span class="op">+</span> <span class="va">study_sample_rdsplus</span> <span class="op">+</span> </span>
<span>  <span class="co"># answer strategy (estimators)</span></span>
<span>  <span class="va">est_ss</span> <span class="op">+</span> <span class="va">est_sspse</span> <span class="op">+</span> <span class="va">est_chords</span> <span class="op">+</span></span>
<span>  <span class="va">est_multi</span> <span class="op">+</span></span>
<span>  <span class="va">est_nsum_pps</span> <span class="op">+</span> <span class="va">est_ht_pps</span> <span class="op">+</span></span>
<span>  <span class="va">est_nsum_tls</span> <span class="op">+</span> <span class="va">est_ht_tls</span> <span class="op">+</span> <span class="va">est_recap_tls</span> <span class="op">+</span></span>
<span>  <span class="va">est_recap_rds_pps</span> <span class="op">+</span> <span class="va">est_recap_rds_tls</span> <span class="op">+</span> <span class="va">est_link</span></span></code></pre></div>
<div class="section level3">
<h3 id="draw-population-and-relevant-samples">Draw population and relevant samples<a class="anchor" aria-label="anchor" href="#draw-population-and-relevant-samples"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># can draw full data</span></span>
<span><span class="va">study1_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/draw_functions.html" class="external-link">draw_data</a></span><span class="op">(</span><span class="va">study1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">study1_data</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">.N</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span>options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scrollX <span class="op">=</span> <span class="cn">TRUE</span>, pageLength <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="draw-inquiries">Draw inquiries<a class="anchor" aria-label="anchor" href="#draw-inquiries"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># can draw estimands of interest</span></span>
<span><span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/draw_functions.html" class="external-link">draw_estimands</a></span><span class="op">(</span><span class="va">study1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="draw-estimates">Draw estimates<a class="anchor" aria-label="anchor" href="#draw-estimates"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># can draw estimates</span></span>
<span><span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/draw_functions.html" class="external-link">draw_estimates</a></span><span class="op">(</span><span class="va">study1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="step-7--diagnose-study-design">Step 7. Diagnose study design<a class="anchor" aria-label="anchor" href="#step-7--diagnose-study-design"></a>
</h2>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"doParallel"</span>, <span class="st">"parallel"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">doParallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/doParallel/man/registerDoParallel.html" class="external-link">registerDoParallel</a></span><span class="op">(</span>cores <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span></span>
<span><span class="va">study1_simulations</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">plyr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/llply.html" class="external-link">llply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>,</span>
<span>    .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span></span>
<span>        <span class="fu">DeclareDesign</span><span class="fu">::</span><span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/simulate_design.html" class="external-link">simulate_design</a></span><span class="op">(</span><span class="va">study1</span>, sims <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>          <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>            sim_ID <span class="op">=</span> <span class="va">x</span></span>
<span>          <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    .parallel <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">study1_simulations</span>, <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"inst/extdata/study1_sim.rds"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">study_diagnosands</span> <span class="op">&lt;-</span></span>
<span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_diagnosands.html" class="external-link">declare_diagnosands</a></span><span class="op">(</span></span>
<span>    mean_estimand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">estimand</span><span class="op">)</span>,</span>
<span>    mean_estimate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">estimate</span><span class="op">)</span>,</span>
<span>    sd_estimate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">estimate</span><span class="op">)</span>,</span>
<span>    mean_se <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">se</span><span class="op">)</span>,</span>
<span>    bias <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">estimate</span> <span class="op">-</span> <span class="va">estimand</span><span class="op">)</span>,</span>
<span>    rmse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">(</span><span class="va">estimate</span> <span class="op">-</span> <span class="va">estimand</span><span class="op">)</span> <span class="op">^</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">study1_simulations</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"study1_sim.rds"</span>, package <span class="op">=</span> <span class="st">"hiddenmeta"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/diagnose_design.html" class="external-link">diagnose_design</a></span><span class="op">(</span>simulations_df <span class="op">=</span> <span class="va">study1_simulations</span>, </span>
<span>                diagnosands <span class="op">=</span> <span class="va">study_diagnosands</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/reshape_diagnosis.html" class="external-link">reshape_diagnosis</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="st">'Design'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span>options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scrollX <span class="op">=</span> <span class="cn">TRUE</span>, pageLength <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9032bcfb4f79473235d6" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9032bcfb4f79473235d6">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42"],["hidden_prev","","hidden_prev","","hidden_prev_in_known","","hidden_size","","hidden_size","","hidden_size","","hidden_size","","hidden_size","","hidden_size","","hidden_size","","hidden_size","","hidden_size","","hidden_size","","hidden_size","","hidden_size_in_known","","known_prev","","known_size","","target_prev","","target_prev_in_hidden","","target_size","","target_size_in_hidden",""],["hidden_prev_pps_ht","","hidden_prev_tls_ht","",null,"","hidden_size_link_trace","","hidden_size_pps_ht","","hidden_size_pps_nsum","","hidden_size_rds_chords","","hidden_size_rds_multi","","hidden_size_rds_pps_recap","","hidden_size_rds_sspse","","hidden_size_rds_tls_recap","","hidden_size_tls_ht","","hidden_size_tls_nsum","","hidden_size_tls_recap","",null,"",null,"",null,"",null,"",null,"",null,"",null,""],["100","","100","","100","","100","","100","","100","","100","","100","","100","","100","","100","","100","","100","","100","","100","","100","","100","","100","","100","","100","","100",""],["0.20","(0.00)","0.20","(0.00)","0.18","(0.01)","200.67","(0.53)","200.67","(0.53)","200.67","(0.53)","200.67","(0.53)","200.67","(0.53)","200.67","(0.53)","200.67","(0.53)","200.67","(0.53)","200.67","(0.53)","200.67","(0.53)","200.67","(0.53)","17.76","(0.61)","0.10","(0.00)","97.95","(1.46)","0.31","(0.00)","0.30","(0.00)","309.69","(2.92)","60.60","(0.64)"],["0.20","(0.00)","0.15","(0.00)","NA","NA","138.34","(0.49)","199.27","(2.41)","96.59","(1.02)","74.03","(3.64)","207.18","(3.59)","200.30","(5.67)","97.64","(1.46)","201.42","(0.89)","154.79","(1.95)","195.94","(2.64)","201.42","(0.94)","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],["0.03","(0.00)","0.02","(0.00)","NA","NA","4.93","(0.32)","26.07","(1.49)","11.01","(0.86)","38.71","(3.42)","38.06","(2.65)","51.60","(6.52)","15.18","(1.33)","9.37","(0.64)","19.70","(1.73)","27.74","(2.28)","9.58","(0.59)","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],["0.03","(0.00)","0.04","(0.00)","NA","NA","8.12","(0.35)","32.70","(0.24)","15.30","(0.16)","36.78","(0.70)","57.55","(2.33)","49.20","(2.41)","39.27","(2.20)","7.94","(0.07)","43.44","(0.65)","25.80","(0.72)","10.77","(0.15)","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],["-0.00","(0.00)","-0.05","(0.00)","NA","NA","-62.33","(0.66)","-1.40","(2.50)","-104.08","(1.12)","-126.64","(3.70)","6.51","(3.47)","-0.37","(5.81)","-103.03","(1.75)","0.75","(0.61)","-45.88","(2.17)","-4.73","(2.90)","0.75","(1.03)","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],["0.03","(0.00)","0.05","(0.00)","NA","NA","62.70","(0.66)","27.25","(1.33)","104.80","(1.09)","132.44","(2.85)","38.78","(2.61)","51.98","(6.45)","104.61","(1.54)","6.61","(0.39)","50.49","(1.77)","29.34","(2.23)","9.29","(0.49)","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Inquiry<\/th>\n      <th>Estimator<\/th>\n      <th>N Sims<\/th>\n      <th>Mean Estimand<\/th>\n      <th>Mean Estimate<\/th>\n      <th>SD Estimate<\/th>\n      <th>Mean Se<\/th>\n      <th>Bias<\/th>\n      <th>RMSE<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":15,"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,15,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="diagnosis-of-multiple-studies">Diagnosis of multiple studies<a class="anchor" aria-label="anchor" href="#diagnosis-of-multiple-studies"></a>
</h2>
<div class="section level3">
<h3 id="additional-study-designs">Additional study designs<a class="anchor" aria-label="anchor" href="#additional-study-designs"></a>
</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">study_2</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    pop <span class="op">=</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        handler <span class="op">=</span> <span class="va">get_study_population</span>,</span>
<span>        network_handler <span class="op">=</span> <span class="va">sim_block_network</span>,</span>
<span>        network_handler_args <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">5000</span>, K <span class="op">=</span> <span class="fl">3</span>, </span>
<span>               prev_K <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>frame <span class="op">=</span> <span class="fl">.5</span>, known <span class="op">=</span> <span class="fl">.2</span>, hidden <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span>, </span>
<span>               rho_K <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.05</span>, <span class="fl">.05</span>, <span class="fl">.05</span><span class="op">)</span>,</span>
<span>               p_edge_within <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>frame <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.05</span><span class="op">)</span>, </span>
<span>                                    known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.05</span><span class="op">)</span>, </span>
<span>                                    hidden <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.9</span><span class="op">)</span><span class="op">)</span>,</span>
<span>               p_edge_between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>frame <span class="op">=</span> <span class="fl">0.05</span>, </span>
<span>                                     known <span class="op">=</span> <span class="fl">0.1</span>, </span>
<span>                                     hidden <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span>,</span>
<span>               directed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>        </span>
<span>        group_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"frame"</span>, <span class="st">"known"</span>, <span class="st">"hidden"</span><span class="op">)</span>,</span>
<span>        </span>
<span>        <span class="co"># probability of visibility (show-up) for each group</span></span>
<span>        p_visible <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>frame <span class="op">=</span> <span class="fl">1</span>, known <span class="op">=</span> <span class="fl">1</span>, hidden <span class="op">=</span> <span class="fl">.6</span><span class="op">)</span>,</span>
<span>        </span>
<span>        <span class="co"># probability of service utilization in hidden population</span></span>
<span>        <span class="co"># for service multiplier</span></span>
<span>        </span>
<span>        add_groups <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>service_use <span class="op">=</span> <span class="st">"rbinom(.N, 1, 0.25 + hidden * 0.3)"</span>,</span>
<span>               <span class="st">"paste0('loc_', 1:8) := lapply(runif(8, 0.05,.3), function(add) rbinom(.N, 1, 0.1 + hidden * add))"</span>,</span>
<span>               known_2 <span class="op">=</span> <span class="fl">0.1</span>, known_3 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>    sample <span class="op">=</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        rds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_rds</span>,</span>
<span>                   <span class="co"># RDS parameters</span></span>
<span>                   sampling_variable <span class="op">=</span> <span class="st">"rds"</span>,</span>
<span>                   hidden_var <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                   n_seed <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                   n_coupons <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                   n_waves <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                   target_type <span class="op">=</span> <span class="st">"waves"</span>,</span>
<span>                   target_n_rds <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>        tls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_tls</span>,</span>
<span>                   sampling_variable <span class="op">=</span> <span class="st">"tls"</span>,</span>
<span>                   <span class="co"># TLS sampling parameters</span></span>
<span>                   target_n_clusters <span class="op">=</span> <span class="fl">8</span>,</span>
<span>                   target_cluster_type <span class="op">=</span> <span class="st">"fixed"</span>,</span>
<span>                   target_per_cluster <span class="op">=</span> <span class="fl">40</span>,</span>
<span>                   clusters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        pps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_pps</span>,</span>
<span>                   sampling_variable <span class="op">=</span> <span class="st">"pps"</span>,</span>
<span>                   <span class="co"># prop sampling parameters</span></span>
<span>                   sampling_frame <span class="op">=</span> <span class="st">"frame"</span>,</span>
<span>                   strata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                   cluster <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                   target_n_pps <span class="op">=</span> <span class="fl">800</span><span class="op">)</span>,</span>
<span>        link_trace <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_rds</span>,</span>
<span>                            sampling_variable <span class="op">=</span> <span class="st">"link_trace"</span>,</span>
<span>                            hidden_var <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                            n_seed <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                            n_coupons <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                            add_seeds <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                            target <span class="op">=</span> <span class="st">"sample"</span>,</span>
<span>                            target_n_rds <span class="op">=</span> <span class="fl">150</span>,</span>
<span>                            linktrace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>    inquiries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_estimands</span>,</span>
<span>                     out_groups <span class="op">=</span> <span class="st">"^known$|^frame$"</span>, </span>
<span>                     hidden_var <span class="op">=</span> <span class="st">"hidden"</span><span class="op">)</span>,</span>
<span>    estimators <span class="op">=</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        rds <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sspse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_sspse</span>, </span>
<span>                            label <span class="op">=</span> <span class="st">"rds_sspse"</span>,</span>
<span>                            prior_mean <span class="op">=</span> <span class="fl">450</span>,</span>
<span>                            mcmc_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>interval <span class="op">=</span> <span class="fl">5</span>, burnin <span class="op">=</span> <span class="fl">2000</span>, samplesize <span class="op">=</span> <span class="fl">500</span><span class="op">)</span>,</span>
<span>                            total <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>                            rds_prefix <span class="op">=</span> <span class="st">"rds"</span><span class="op">)</span>,</span>
<span>               chords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_chords</span>, </span>
<span>                             type <span class="op">=</span> <span class="st">"jeffreys"</span>,</span>
<span>                             label <span class="op">=</span> <span class="st">"rds_chords"</span>,</span>
<span>                             seed_condition <span class="op">=</span> <span class="st">"rds_from == -999"</span>,</span>
<span>                             n_boot <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                             rds_prefix <span class="op">=</span> <span class="st">"rds"</span><span class="op">)</span>,</span>
<span>               multiplier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_multiplier</span>, </span>
<span>                                 service_var <span class="op">=</span> <span class="st">"service_use"</span>,</span>
<span>                                 seed_condition <span class="op">=</span> <span class="st">"rds_from == -999"</span>,</span>
<span>                                 n_boot <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                                 rds_prefix <span class="op">=</span> <span class="st">"rds"</span>,</span>
<span>                                 label <span class="op">=</span> <span class="st">"rds_multi"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        tls <span class="op">=</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ht <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_ht</span>,</span>
<span>                         weight_var <span class="op">=</span> <span class="st">"tls_weight"</span>,</span>
<span>                         survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">tls_loc_sampled</span>,</span>
<span>                         prefix <span class="op">=</span> <span class="st">"tls"</span>,</span>
<span>                         label <span class="op">=</span> <span class="st">"tls_ht"</span><span class="op">)</span>,</span>
<span>               nsum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_nsum</span>,</span>
<span>                           known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="st">"frame"</span><span class="op">)</span>,</span>
<span>                           hidden <span class="op">=</span> <span class="st">"hidden_visible_out"</span>,</span>
<span>                           survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">tls_loc_sampled</span>,</span>
<span>                           n_boot <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                           prefix <span class="op">=</span> <span class="st">"tls"</span>,</span>
<span>                           label <span class="op">=</span> <span class="st">"tls_nsum"</span><span class="op">)</span>,</span>
<span>               recap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,</span>
<span>                            capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span>,</span>
<span>                            sample_condition <span class="op">=</span> <span class="st">"tls == 1"</span>,</span>
<span>                            model <span class="op">=</span> <span class="st">"Mt"</span>,</span>
<span>                            hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                            label <span class="op">=</span> <span class="st">"tls_recap"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        pps <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>            ht <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_ht</span>, </span>
<span>                      label <span class="op">=</span> <span class="st">"pps_ht"</span><span class="op">)</span>,</span>
<span>            nsum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_nsum</span>,</span>
<span>                        known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"frame"</span>, <span class="st">"known"</span><span class="op">)</span>,</span>
<span>                        hidden <span class="op">=</span> <span class="st">"hidden_visible_out"</span>,</span>
<span>                        survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">pps_cluster</span> <span class="op">+</span> <span class="fu">strata</span><span class="op">(</span><span class="va">pps_strata</span><span class="op">)</span>,</span>
<span>                        n_boot <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                        label <span class="op">=</span> <span class="st">"pps_nsum"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        all <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>recap1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,</span>
<span>                             capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rds"</span>, <span class="st">"pps"</span><span class="op">)</span>,</span>
<span>                             model <span class="op">=</span> <span class="st">"Mt"</span>,</span>
<span>                             hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                             label <span class="op">=</span> <span class="st">"rds_pps_recap"</span><span class="op">)</span>,</span>
<span>               recap2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,</span>
<span>                             capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rds"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                             model <span class="op">=</span> <span class="st">"Mt"</span>,</span>
<span>                             hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                             label <span class="op">=</span> <span class="st">"rds_tls_recap"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        link_trace <span class="op">=</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>link_trace <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_linktrace</span>,</span>
<span>                                   total <span class="op">=</span> <span class="fl">300</span>,</span>
<span>                                   strata <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                                   gibbs_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>n_samples <span class="op">=</span> <span class="fl">5L</span>, </span>
<span>                                                       chain_samples <span class="op">=</span> <span class="fl">250L</span>, </span>
<span>                                                       chain_burnin <span class="op">=</span> <span class="fl">50L</span><span class="op">)</span>,</span>
<span>                                   priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>p_n <span class="op">=</span> <span class="fl">0L</span>, p_l <span class="op">=</span> <span class="fl">0.1</span>, p_b <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span>,</span>
<span>                                   prefix <span class="op">=</span> <span class="st">"link_trace"</span>,</span>
<span>                                   label <span class="op">=</span> <span class="st">"link_trace"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">study_3</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    pop <span class="op">=</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        handler <span class="op">=</span> <span class="va">get_study_population</span>,</span>
<span>        </span>
<span>        <span class="co"># network structure setup</span></span>
<span>        network_handler <span class="op">=</span> <span class="va">sim_block_network</span>,</span>
<span>        network_handler_args <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">2000</span>, K <span class="op">=</span> <span class="fl">2</span>, prev_K <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fl">.3</span>, hidden <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span>, rho_K <span class="op">=</span> <span class="fl">.3</span>,</span>
<span>               p_edge_within <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.1</span><span class="op">)</span>, hidden <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.7</span><span class="op">)</span><span class="op">)</span>,</span>
<span>               p_edge_between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fl">0.05</span>, hidden <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>               directed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>        </span>
<span>        <span class="co"># groups</span></span>
<span>        group_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="st">"hidden"</span><span class="op">)</span>,</span>
<span>        </span>
<span>        <span class="co"># probability of visibility (show-up) for each group</span></span>
<span>        p_visible <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fl">1</span>, hidden <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span>,</span>
<span>        </span>
<span>        <span class="co"># probability of service utilization in hidden population</span></span>
<span>        <span class="co"># for service multiplier</span></span>
<span>        add_groups <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>service_use <span class="op">=</span> <span class="st">"rbinom(n(), 1, 0.25 + hidden * 0.05)"</span>,</span>
<span>               <span class="st">"paste0('loc_', 1:8) := lapply(c(.2, .1, .3, .2, .4, .1, .3, .2), function(add) rbinom(.N, 1, 0.1 + hidden * add))"</span>,</span>
<span>               known_2 <span class="op">=</span> <span class="fl">0.1</span>, known_3 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>    sample <span class="op">=</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        rds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_rds</span>,</span>
<span>                   <span class="co"># RDS parameters</span></span>
<span>                   sampling_variable <span class="op">=</span> <span class="st">"rds"</span>,</span>
<span>                   hidden_var <span class="op">=</span> <span class="st">"hidden"</span>, <span class="co"># default</span></span>
<span>                   n_seed <span class="op">=</span> <span class="fl">20</span>,</span>
<span>                   n_coupons <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                   target_type <span class="op">=</span> <span class="st">"sample"</span>,</span>
<span>                   target_n_rds <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>        tls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_tls</span>,</span>
<span>                   sampling_variable <span class="op">=</span> <span class="st">"tls"</span>,</span>
<span>                   <span class="co"># TLS sampling parameters</span></span>
<span>                   target_n_clusters <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                   target_cluster_type <span class="op">=</span> <span class="st">"fixed"</span>,</span>
<span>                   target_per_cluster <span class="op">=</span> <span class="fl">30</span>,</span>
<span>                   clusters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        pps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_pps</span>,</span>
<span>                   sampling_variable <span class="op">=</span> <span class="st">"pps"</span>,</span>
<span>                   <span class="co"># prop sampling parameters</span></span>
<span>                   sampling_frame <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                   strata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                   cluster <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                   target_n_pps <span class="op">=</span> <span class="fl">400</span><span class="op">)</span>,</span>
<span>        link_trace <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_rds</span>,</span>
<span>                            sampling_variable <span class="op">=</span> <span class="st">"link_trace"</span>,</span>
<span>                            hidden_var <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                            n_seed <span class="op">=</span> <span class="fl">50</span>,</span>
<span>                            n_coupons <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                            add_seeds <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                            target <span class="op">=</span> <span class="st">"sample"</span>,</span>
<span>                            target_n_rds <span class="op">=</span> <span class="fl">150</span>,</span>
<span>                            linktrace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>    inquiries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_estimands</span>,</span>
<span>                     out_groups <span class="op">=</span> <span class="st">"^known$"</span>, </span>
<span>                     hidden_var <span class="op">=</span> <span class="st">"hidden"</span><span class="op">)</span>,</span>
<span>    estimators <span class="op">=</span> </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>        rds <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sspse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_sspse</span>,</span>
<span>                            prior_mean <span class="op">=</span> <span class="fl">200</span>,</span>
<span>                            mcmc_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>interval <span class="op">=</span> <span class="fl">5</span>, burnin <span class="op">=</span> <span class="fl">2000</span>, samplesize <span class="op">=</span> <span class="fl">500</span><span class="op">)</span>,</span>
<span>                            total <span class="op">=</span> <span class="fl">2000</span>,</span>
<span>                            rds_prefix <span class="op">=</span> <span class="st">"rds"</span>, </span>
<span>                            label <span class="op">=</span> <span class="st">"rds_sspse"</span><span class="op">)</span>,</span>
<span>               chords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_chords</span>, </span>
<span>                             type <span class="op">=</span> <span class="st">"jeffreys"</span>,</span>
<span>                             seed_condition <span class="op">=</span> <span class="st">"rds_from == -999"</span>,</span>
<span>                             n_boot <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                             rds_prefix <span class="op">=</span> <span class="st">"rds"</span>,</span>
<span>                             label <span class="op">=</span> <span class="st">"rds_chords"</span><span class="op">)</span>,</span>
<span>               multiplier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_multiplier</span>, </span>
<span>                                 service_var <span class="op">=</span> <span class="st">"service_use"</span>,</span>
<span>                                 seed_condition <span class="op">=</span> <span class="st">"rds_from == -999"</span>,</span>
<span>                                 n_boot <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                                 rds_prefix <span class="op">=</span> <span class="st">"rds"</span>,</span>
<span>                                 label <span class="op">=</span> <span class="st">"rds_multi"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        tls <span class="op">=</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ht <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_ht</span>,</span>
<span>                         weight_var <span class="op">=</span> <span class="st">"tls_weight"</span>,</span>
<span>                         survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">tls_loc_sampled</span>,</span>
<span>                         prefix <span class="op">=</span> <span class="st">"tls"</span>,</span>
<span>                         label <span class="op">=</span> <span class="st">"tls_ht"</span><span class="op">)</span>,</span>
<span>               nsum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_nsum</span>,</span>
<span>                           known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="st">"known_2"</span>, <span class="st">"known_3"</span><span class="op">)</span>,</span>
<span>                           hidden <span class="op">=</span> <span class="st">"hidden_visible_out"</span>,</span>
<span>                           survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">tls_loc_sampled</span>,</span>
<span>                           n_boot <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                           prefix <span class="op">=</span> <span class="st">"tls"</span>,</span>
<span>                           label <span class="op">=</span> <span class="st">"tls_nsum"</span><span class="op">)</span>,</span>
<span>               recap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,</span>
<span>                            capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>                            <span class="co"># sample_condition = "tls == 1",</span></span>
<span>                            model <span class="op">=</span> <span class="st">"Mt"</span>,</span>
<span>                            hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                            label <span class="op">=</span> <span class="st">"tls_recap"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        pps <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ht <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_ht</span>,</span>
<span>                         prefix <span class="op">=</span> <span class="st">"pps"</span>,</span>
<span>                         label <span class="op">=</span> <span class="st">"pps_ht"</span><span class="op">)</span>,</span>
<span>               nsum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_nsum</span>,</span>
<span>                           known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="st">"known_2"</span>, <span class="st">"known_3"</span><span class="op">)</span>,</span>
<span>                           hidden <span class="op">=</span> <span class="st">"hidden_visible_out"</span>,</span>
<span>                           survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">pps_cluster</span> <span class="op">+</span> <span class="fu">strata</span><span class="op">(</span><span class="va">pps_strata</span><span class="op">)</span>,</span>
<span>                           n_boot <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                           prefix <span class="op">=</span> <span class="st">"pps"</span>,</span>
<span>                           label <span class="op">=</span> <span class="st">"pps_nsum"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        all <span class="op">=</span> </span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>recap1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,</span>
<span>                             capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rds"</span>, <span class="st">"pps"</span><span class="op">)</span>,</span>
<span>                             model <span class="op">=</span> <span class="st">"Mt"</span>,</span>
<span>                             hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                             label <span class="op">=</span> <span class="st">"rds_pps_recap"</span><span class="op">)</span>,</span>
<span>               recap2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,</span>
<span>                             capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rds"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                             model <span class="op">=</span> <span class="st">"Mt"</span>,</span>
<span>                             hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                             label <span class="op">=</span> <span class="st">"rds_tls_recap"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        link_trace <span class="op">=</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>link_trace <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_linktrace</span>,</span>
<span>                                   total <span class="op">=</span> <span class="fl">300</span>,</span>
<span>                                   strata <span class="op">=</span> <span class="st">"hidden"</span>,</span>
<span>                                   gibbs_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>n_samples <span class="op">=</span> <span class="fl">5L</span>, </span>
<span>                                                       chain_samples <span class="op">=</span> <span class="fl">250L</span>, </span>
<span>                                                       chain_burnin <span class="op">=</span> <span class="fl">50L</span><span class="op">)</span>,</span>
<span>                                   priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>p_n <span class="op">=</span> <span class="fl">0L</span>, p_l <span class="op">=</span> <span class="fl">0.1</span>, p_b <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span>,</span>
<span>                                   prefix <span class="op">=</span> <span class="st">"link_trace"</span>,</span>
<span>                                   label <span class="op">=</span> <span class="st">"link_trace"</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="declare-multiple-studies">Declare multiple studies<a class="anchor" aria-label="anchor" href="#declare-multiple-studies"></a>
</h3>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">multi_population</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_population.html" class="external-link">declare_population</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_multi_populations</span>, </span>
<span>                     pops_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>study_1 <span class="op">=</span> <span class="va">study_1</span><span class="op">$</span><span class="va">pop</span>,</span>
<span>                                      <span class="co"># study_2 = study_2$pop,</span></span>
<span>                                      study_3 <span class="op">=</span> <span class="va">study_3</span><span class="op">$</span><span class="va">pop</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">multi_sampling</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_sampling.html" class="external-link">declare_sampling</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_multi_samples</span>, </span>
<span>                   samples_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>study_1 <span class="op">=</span> <span class="va">study_1</span><span class="op">$</span><span class="va">sample</span>,</span>
<span>                                       <span class="co"># study_2 = study_2$sample,</span></span>
<span>                                       study_3 <span class="op">=</span> <span class="va">study_3</span><span class="op">$</span><span class="va">sample</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">multi_inquiry</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_inquiry.html" class="external-link">declare_inquiry</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_multi_estimands</span>, </span>
<span>                  inquiries_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>study_1 <span class="op">=</span> <span class="va">study_1</span><span class="op">$</span><span class="va">inquiries</span>,</span>
<span>                                        <span class="co"># study_2 = study_2$inquiries,</span></span>
<span>                                        study_3 <span class="op">=</span> <span class="va">study_3</span><span class="op">$</span><span class="va">inquiries</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">multi_estimators</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_estimator.html" class="external-link">declare_estimator</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_multi_estimates</span>,</span>
<span>                    estimators_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>study_1 <span class="op">=</span> <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span>,</span>
<span>                                           <span class="co"># study_2 = study_2$estimators,</span></span>
<span>                                           study_3 <span class="op">=</span> <span class="va">study_3</span><span class="op">$</span><span class="va">estimators</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">multi_study</span> <span class="op">&lt;-</span> <span class="va">multi_population</span> <span class="op">+</span> <span class="va">multi_sampling</span> <span class="op">+</span> <span class="va">multi_inquiry</span> <span class="op">+</span> <span class="va">multi_estimators</span></span>
<span></span>
<span><span class="co"># set.seed(872312)</span></span>
<span><span class="co"># draw_estimands(multi_study) %&gt;%</span></span>
<span><span class="co">#   kable()</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># draw_estimates(multi_study) %&gt;%</span></span>
<span><span class="co">#   kable()</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="diagnose-multiple-studies">Diagnose multiple studies<a class="anchor" aria-label="anchor" href="#diagnose-multiple-studies"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># multi_simulations &lt;- simulate_design(multi_study, sims = 2)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"doParallel"</span>, <span class="st">"parallel"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">doParallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/doParallel/man/registerDoParallel.html" class="external-link">registerDoParallel</a></span><span class="op">(</span>cores <span class="op">=</span> <span class="fl">40</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span></span>
<span><span class="va">multi_simulations</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">plyr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/llply.html" class="external-link">llply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>,</span>
<span>    .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span></span>
<span>        <span class="fu">DeclareDesign</span><span class="fu">::</span><span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/simulate_design.html" class="external-link">simulate_design</a></span><span class="op">(</span><span class="va">multi_study</span>, sims <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>          <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>            sim_ID <span class="op">=</span> <span class="va">x</span></span>
<span>          <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    .parallel <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">multi_simulations</span>, file <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"inst/extdata/multi_sim.rds"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">multi_simulations</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"multi_sim.rds"</span>, package <span class="op">=</span> <span class="st">"hiddenmeta"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/diagnose_design.html" class="external-link">diagnose_design</a></span><span class="op">(</span>simulations_df <span class="op">=</span> <span class="va">multi_simulations</span>, </span>
<span>                diagnosands <span class="op">=</span> <span class="va">study_diagnosands</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/reshape_diagnosis.html" class="external-link">reshape_diagnosis</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="st">'Design'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">`Mean Estimate`</span> <span class="op">!=</span> <span class="st">"NA"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span>options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scrollX <span class="op">=</span> <span class="cn">TRUE</span>, pageLength <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="diagnosis-of-meta-study">Diagnosis of meta-study<a class="anchor" aria-label="anchor" href="#diagnosis-of-meta-study"></a>
</h2>
<ol style="list-style-type: decimal">
<li><p>Conduct multi-study design for as many sampling-estimator pairs
in each study as possible, then diagnose the multi-study design.
Calculate average (across simulations) estimand and bias of
sampling-estimator for each of the studies and estimator sampling
strategies. These will serve as population we will be drawing
population-sampling-estimator triads</p></li>
<li>
<p>Estimands include:</p>
<ul>
<li>Average estimand by inquiry label (within study)</li>
<li>Average bias of specific sampling-estimator pair (across studies)
compared to truth</li>
<li>Average relative bias of sampling-estimator pair (across studies)
compared to “gold standard”</li>
<li>Ratio of average bias to costs of sampling-estimator pair</li>
</ul>
</li>
<li><p>As mentioned before sampling will consist of drawing
population-sampling-estimator triads from the population presuming that
each study uses at least two sampling strategies at a time</p></li>
<li><p>Once we draw sample we use Stan model to estimate study-specific
estimands and sampling-estimator specific errors (biases)</p></li>
<li><p>We have all parts to conduct the full cycle of
meta-analyses</p></li>
</ol>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">meta_population</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_population.html" class="external-link">declare_population</a></span><span class="op">(</span>multi_design <span class="op">=</span> <span class="va">multi_study</span>, n_sim <span class="op">=</span> <span class="fl">3</span>, parallel <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                     handler <span class="op">=</span> <span class="va">get_meta_population</span><span class="op">)</span></span>
<span></span>
<span><span class="va">meta_inquiry</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_inquiry.html" class="external-link">declare_inquiry</a></span><span class="op">(</span>study_estimand <span class="op">=</span> <span class="st">"hidden_size"</span>,</span>
<span>                  samp_est_benchmark <span class="op">=</span> <span class="st">"pps_ht"</span>, </span>
<span>                  handler <span class="op">=</span> <span class="va">get_meta_estimands</span><span class="op">)</span></span>
<span></span>
<span><span class="va">meta_sample</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_sampling.html" class="external-link">declare_sampling</a></span><span class="op">(</span>sampling_variable <span class="op">=</span> <span class="st">"meta"</span>,</span>
<span>                   selection_variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sample"</span>, <span class="st">"estimator"</span><span class="op">)</span>,</span>
<span>                   samples_per_study <span class="op">=</span> <span class="fl">2</span>, estimator_per_sample <span class="op">=</span> <span class="fl">3</span>, </span>
<span>                   force <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="st">"pps"</span>, estimator <span class="op">=</span> <span class="st">"ht"</span><span class="op">)</span>,</span>
<span>                   handler <span class="op">=</span> <span class="va">get_meta_sample</span><span class="op">)</span></span>
<span></span>
<span><span class="va">meta_estimator</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_estimator.html" class="external-link">declare_estimator</a></span><span class="op">(</span>sampling_variable <span class="op">=</span> <span class="st">"meta"</span>,</span>
<span>                    which_estimand <span class="op">=</span> <span class="st">"hidden_size"</span>,</span>
<span>                    benchmark <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="st">"pps"</span>, estimator <span class="op">=</span> <span class="st">"ht"</span><span class="op">)</span>,</span>
<span>                    control_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>                      iter <span class="op">=</span> <span class="fl">8000</span>, chains <span class="op">=</span> <span class="fl">8</span>, thin <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                      seed <span class="op">=</span> <span class="fl">872312</span>,</span>
<span>                      cores <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                    stan_handler <span class="op">=</span> <span class="va">get_meta_stan</span>,</span>
<span>                    handler <span class="op">=</span> <span class="va">get_meta_estimates</span><span class="op">)</span></span>
<span></span>
<span><span class="va">meta_study</span> <span class="op">&lt;-</span> <span class="va">meta_population</span> <span class="op">+</span> <span class="va">meta_inquiry</span> <span class="op">+</span> <span class="va">meta_sample</span> <span class="op">+</span> <span class="va">meta_estimator</span></span>
<span></span>
<span><span class="co"># set.seed(872312)</span></span>
<span><span class="co"># draw_estimands(meta_study) %&gt;% </span></span>
<span><span class="co">#   kable()</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># draw_estimates(meta_study) %&gt;% </span></span>
<span><span class="co">#   kable()</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"doParallel"</span>, <span class="st">"parallel"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">doParallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/doParallel/man/registerDoParallel.html" class="external-link">registerDoParallel</a></span><span class="op">(</span>cores <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span></span>
<span><span class="va">meta_simulations</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">plyr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/llply.html" class="external-link">llply</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>,</span>
<span>    .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span></span>
<span>        <span class="fu">DeclareDesign</span><span class="fu">::</span><span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/simulate_design.html" class="external-link">simulate_design</a></span><span class="op">(</span><span class="va">meta_study</span>, sims <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>          <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>            sim_ID <span class="op">=</span> <span class="va">x</span></span>
<span>          <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">}</span>,</span>
<span>    .parallel <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">meta_simulations</span>, file <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"inst/extdata/meta_sim.rds"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">meta_simulations</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"meta_sim.rds"</span>, package <span class="op">=</span> <span class="st">"hiddenmeta"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/diagnose_design.html" class="external-link">diagnose_design</a></span><span class="op">(</span>simulations_df <span class="op">=</span> <span class="va">meta_simulations</span>, </span>
<span>                diagnosands <span class="op">=</span> <span class="va">study_diagnosands</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/reshape_diagnosis.html" class="external-link">reshape_diagnosis</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="st">'Design'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">`Mean Estimate`</span> <span class="op">!=</span> <span class="st">"NA"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span>options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scrollX <span class="op">=</span> <span class="cn">TRUE</span>, pageLength <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-329f3b92661b7dffa95d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-329f3b92661b7dffa95d">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"],["rel_bias_pps_ht","","rel_bias_pps_nsum","","rel_bias_rds_chords","","rel_bias_rds_multi","","rel_bias_rds_pps_recap","","rel_bias_rds_sspse","","rel_bias_tls_ht","","rel_bias_tls_nsum","","rel_bias_tls_recap","","study_1_hidden_size","","study_2_hidden_size","","study_3_hidden_size",""],["rel_bias_pps_ht_meta","","rel_bias_pps_nsum_meta","","rel_bias_rds_chords_meta","","rel_bias_rds_multi_meta","","rel_bias_rds_pps_recap_meta","","rel_bias_rds_sspse_meta","","rel_bias_tls_ht_meta","","rel_bias_tls_nsum_meta","","rel_bias_tls_recap_meta","","study_1_meta","","study_2_meta","","study_3_meta",""],["100","","100","","65","","76","","88","","71","","85","","72","","69","","100","","100","","100",""],["1.00","(0.00)","0.61","(0.01)","2.05","(0.06)","-0.04","(0.01)","0.00","(0.02)","-4.88","(0.25)","3.77","(0.06)","-2.87","(0.06)","3.34","(0.07)","201.22","(0.78)","500.18","(1.27)","199.64","(0.67)"],["1.00","(0.00)","1.19","(0.01)","0.79","(0.06)","1.43","(0.07)","1.30","(0.06)","2.54","(0.33)","0.18","(0.00)","2.29","(0.08)","0.35","(0.01)","298.41","(3.78)","315.06","(3.76)","298.24","(4.68)"],["0.00","(0.00)","0.08","(0.00)","0.44","(0.09)","0.62","(0.05)","0.62","(0.08)","2.93","(0.32)","0.04","(0.00)","0.66","(0.06)","0.06","(0.01)","42.85","(4.82)","40.97","(2.55)","46.64","(5.63)"],["0.00","(0.00)","0.11","(0.00)","0.31","(0.02)","0.20","(0.01)","0.19","(0.01)","0.62","(0.06)","0.03","(0.00)","0.31","(0.02)","0.04","(0.00)","56.96","(0.65)","60.17","(0.68)","56.88","(0.79)"],["0.00","(0.00)","0.58","(0.01)","-1.26","(0.10)","1.47","(0.07)","1.29","(0.07)","7.42","(0.41)","-3.59","(0.07)","5.16","(0.09)","-2.99","(0.07)","97.19","(3.74)","-185.12","(3.85)","98.60","(4.65)"],["0.00","(0.00)","0.60","(0.01)","1.51","(0.08)","1.60","(0.08)","1.46","(0.10)","8.39","(0.48)","3.64","(0.07)","5.23","(0.10)","3.05","(0.08)","106.02","(2.85)","189.30","(3.70)","108.64","(3.06)"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Inquiry<\/th>\n      <th>Estimator<\/th>\n      <th>N Sims<\/th>\n      <th>Mean Estimand<\/th>\n      <th>Mean Estimate<\/th>\n      <th>SD Estimate<\/th>\n      <th>Mean Se<\/th>\n      <th>Bias<\/th>\n      <th>RMSE<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"pageLength":15,"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,15,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Georgiy Syunyaev, Macartan Humphreys.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
