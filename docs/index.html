<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>An R package for diagnosis and meta-analysis of hard-to-reach population measurement studies • hiddenmeta</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="An R package for diagnosis and meta-analysis of hard-to-reach population measurement studies">
<meta property="og:description" content="Package provides a number of tools for simulation of population, sampling and estimation of size and pervalence of hard-to-reach populations. It relies on the MIDA approach proposed in DeclareDesign package">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">hiddenmeta</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/hiddenmeta-base.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/gerasy1987/hiddenmeta/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="hiddenmeta-r-codecov-license-mit" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#hiddenmeta-r-codecov-license-mit" class="anchor"></a>hiddenmeta <img src="https://github.com/gerasy1987/hiddenmeta/workflows/R/badge.svg" alt="R"><a href="https://codecov.io/gh/gerasy1987/hiddenmeta"><img src="https://codecov.io/gh/gerasy1987/hiddenmeta/branch/main/graph/badge.svg?token=ZG9A64Q0A1" alt="codecov"></a> <a href="https://github.com/gerasy1987/hiddenmeta/blob/main/LICENSE"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a>
</h1></div>
<div id="install-and-load-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#install-and-load-packages" class="anchor"></a>Install and load packages</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"DeclareDesign"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"igraph"</span><span class="op">)</span>

<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"gerasy1987/hiddenmeta"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://gsyunyaev.com/hiddenmeta/">hiddenmeta</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://declaredesign.org/r/declaredesign/">DeclareDesign</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="step-1-provide-study-design-features" class="section level2">
<h2 class="hasAnchor">
<a href="#step-1-provide-study-design-features" class="anchor"></a>Step 1. Provide study design features</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## STUDY 1</span>
<span class="va">study_1</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    pop <span class="op">=</span> 
      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        handler <span class="op">=</span> <span class="va">get_study_population</span>,
        
        <span class="co"># network structure setup</span>
        network_handler <span class="op">=</span> <span class="va">sim_block_network</span>,
        network_handler_args <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">1000</span>, K <span class="op">=</span> <span class="fl">2</span>, prev_K <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fl">.3</span>, hidden <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span>, rho_K <span class="op">=</span> <span class="fl">0</span>,
               p_edge_within <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.3</span><span class="op">)</span>, hidden <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span>,
               p_edge_between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fl">0.1</span>, hidden <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,
               directed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,
        
        <span class="co"># groups</span>
        group_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="st">"hidden"</span><span class="op">)</span>,
        
        <span class="co"># probability of visibility (show-up) for each group</span>
        p_visible <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fl">1</span>, hidden <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,
        
        <span class="co"># probability of service utilization in hidden population</span>
        <span class="co"># for service multiplier</span>
        add_groups <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>service_use <span class="op">=</span> <span class="st">"rbinom(n(), 1, 0.25)"</span>,
         <span class="st">"purrr::map_df(hidden, ~ sapply( `names&lt;-`(rep(0, times = 10), paste0('loc_', 1:10)), function(add) rbinom(length(.x), 1, 0.1 + .x * add)))"</span>,
         known_2 <span class="op">=</span> <span class="fl">0.3</span>, known_3 <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>
      <span class="op">)</span>,
    sample <span class="op">=</span> 
      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        rds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_rds</span>,
                   <span class="co"># RDS parameters</span>
                   sampling_variable <span class="op">=</span> <span class="st">"rds"</span>,
                   hidden_var <span class="op">=</span> <span class="st">"hidden"</span>, <span class="co"># default</span>
                   n_seed <span class="op">=</span> <span class="fl">20</span>,
                   n_coupons <span class="op">=</span> <span class="fl">3</span>,
                   add_seeds <span class="op">=</span> <span class="fl">3</span>,
                   target_type <span class="op">=</span> <span class="st">"sample"</span>,
                   target_n_rds <span class="op">=</span> <span class="fl">60</span><span class="op">)</span>,
        tls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_tls</span>,
                   sampling_variable <span class="op">=</span> <span class="st">"tls"</span>,
                   <span class="co"># TLS sampling parameters</span>
                   target_n_clusters <span class="op">=</span> <span class="fl">4</span>,
                   target_n_tls <span class="op">=</span> <span class="fl">180</span>,
                   cluster <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span>,
        pps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_pps</span>,
                   sampling_variable <span class="op">=</span> <span class="st">"pps"</span>,
                   <span class="co"># prop sampling parameters</span>
                   sampling_frame <span class="op">=</span> <span class="cn">NULL</span>,
                   strata <span class="op">=</span> <span class="cn">NULL</span>,
                   cluster <span class="op">=</span> <span class="cn">NULL</span>,
                   target_n_pps <span class="op">=</span> <span class="fl">200</span><span class="op">)</span>
      <span class="op">)</span>,
    inquiries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_estimands</span>,
                     known_pattern <span class="op">=</span> <span class="st">"^known$"</span>, 
                     hidden_var <span class="op">=</span> <span class="st">"hidden"</span><span class="op">)</span>,
    estimators <span class="op">=</span> 
      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        rds <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>sspse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_sspse</span>,
                            prior_mean <span class="op">=</span> <span class="fl">100</span>,
                            mcmc_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>interval <span class="op">=</span> <span class="fl">5</span>, burnin <span class="op">=</span> <span class="fl">2000</span>, samplesize <span class="op">=</span> <span class="fl">500</span><span class="op">)</span>,
                            total <span class="op">=</span> <span class="fl">1000</span>,
                            rds_prefix <span class="op">=</span> <span class="st">"rds"</span>, 
                            label <span class="op">=</span> <span class="st">"rds_sspse"</span><span class="op">)</span>,
               chords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_chords</span>, 
                             type <span class="op">=</span> <span class="st">"mle"</span>,
                             seed_condition <span class="op">=</span> <span class="st">"rds_from == -999"</span>,
                             n_boot <span class="op">=</span> <span class="fl">100</span>,
                             rds_prefix <span class="op">=</span> <span class="st">"rds"</span>,
                             label <span class="op">=</span> <span class="st">"rds_chords"</span><span class="op">)</span>,
               multiplier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_multiplier</span>, 
                                 service_var <span class="op">=</span> <span class="st">"service_use"</span>,
                                 seed_condition <span class="op">=</span> <span class="st">"rds_from == -999"</span>,
                                 n_boot <span class="op">=</span> <span class="fl">100</span>,
                                 rds_prefix <span class="op">=</span> <span class="st">"rds"</span>,
                                 label <span class="op">=</span> <span class="st">"rds_multi"</span><span class="op">)</span><span class="op">)</span>,
        tls <span class="op">=</span>
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>ht <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_ht</span>,
                         weight_var <span class="op">=</span> <span class="st">"tls_weight"</span>,
                         prefix <span class="op">=</span> <span class="st">"tls"</span>,
                         label <span class="op">=</span> <span class="st">"tls_ht"</span><span class="op">)</span>,
               nsum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_nsum</span>,
                           known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="st">"known_2"</span>, <span class="st">"known_3"</span><span class="op">)</span>,
                           hidden <span class="op">=</span> <span class="st">"hidden_visible_out"</span>,
                           survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">tls_cluster</span>,
                           n_boot <span class="op">=</span> <span class="fl">100</span>,
                           prefix <span class="op">=</span> <span class="st">"tls"</span>,
                           label <span class="op">=</span> <span class="st">"tls_nsum"</span><span class="op">)</span>,
               recap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,
                            capture_parse <span class="op">=</span> 
                              <span class="st">"strsplit(x = unique(na.omit(tls_locs_sampled)), split = ';')[[1]]"</span>,
                            sample_condition <span class="op">=</span> <span class="st">"tls == 1"</span>,
                            model <span class="op">=</span> <span class="st">"Mt"</span>,
                            hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,
                            label <span class="op">=</span> <span class="st">"tls_recap"</span><span class="op">)</span><span class="op">)</span>,
        pps <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>ht <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_ht</span>,
                         prefix <span class="op">=</span> <span class="st">"pps"</span>,
                         label <span class="op">=</span> <span class="st">"pps_ht"</span><span class="op">)</span>,
               nsum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_nsum</span>,
                           known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="st">"known_2"</span>, <span class="st">"known_3"</span><span class="op">)</span>,
                           hidden <span class="op">=</span> <span class="st">"hidden_visible_out"</span>,
                           survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">pps_cluster</span> <span class="op">+</span> <span class="fu">strata</span><span class="op">(</span><span class="va">pps_strata</span><span class="op">)</span>,
                           n_boot <span class="op">=</span> <span class="fl">100</span>,
                           prefix <span class="op">=</span> <span class="st">"pps"</span>,
                           label <span class="op">=</span> <span class="st">"pps_nsum"</span><span class="op">)</span><span class="op">)</span>,
        all <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>recap1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,
                             capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rds"</span>, <span class="st">"pps"</span><span class="op">)</span>,
                             model <span class="op">=</span> <span class="st">"Mt"</span>,
                             hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,
                             label <span class="op">=</span> <span class="st">"rds_pps_recap"</span><span class="op">)</span>,
               recap2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,
                             capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rds"</span><span class="op">)</span>,
                             capture_parse <span class="op">=</span> 
                              <span class="st">"strsplit(x = unique(na.omit(tls_locs_sampled)), split = ';')[[1]]"</span>,
                             model <span class="op">=</span> <span class="st">"Mt"</span>,
                             hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,
                             label <span class="op">=</span> <span class="st">"rds_tls_recap"</span><span class="op">)</span><span class="op">)</span>
      <span class="op">)</span>
  <span class="op">)</span></code></pre></div>
</div>
<div id="step-2-declare-study-population" class="section level2">
<h2 class="hasAnchor">
<a href="#step-2-declare-study-population" class="anchor"></a>Step 2. Declare study population</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">study_population</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_population</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">pop</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span>
<span class="va">example_pop</span> <span class="op">&lt;-</span> <span class="fu">study_population</span><span class="op">(</span><span class="op">)</span>

<span class="va">example_pop</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; # A tibble: 1,000 × 75</span>
<span class="co">#&gt;     name type  known hidden links      service_use loc_1 loc_2 loc_3 loc_4 loc_5</span>
<span class="co">#&gt;    &lt;int&gt; &lt;chr&gt; &lt;int&gt;  &lt;int&gt; &lt;chr&gt;            &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1   583 00        0      0 215;310;6…           0     0     0     0     0     0</span>
<span class="co">#&gt;  2   140 00        0      0 19;53;437…           1     0     0     0     0     0</span>
<span class="co">#&gt;  3   670 10        1      0 1;90;103;…           0     0     0     0     0     0</span>
<span class="co">#&gt;  4   218 00        0      0 102;280;8…           1     0     0     0     0     0</span>
<span class="co">#&gt;  5    97 00        0      0 139;198;2…           0     0     0     1     0     0</span>
<span class="co">#&gt;  6    99 00        0      0 16;95;244…           0     0     1     0     0     0</span>
<span class="co">#&gt;  7   116 00        0      0 62;88;127…           1     0     0     0     0     0</span>
<span class="co">#&gt;  8   899 10        1      0 168;191;4…           1     0     0     1     0     0</span>
<span class="co">#&gt;  9   753 10        1      0 40;288;41…           1     0     0     0     0     0</span>
<span class="co">#&gt; 10   845 10        1      0 304;448;5…           1     0     0     0     0     0</span>
<span class="co">#&gt; # … with 990 more rows, and 64 more variables: loc_6 &lt;int&gt;, loc_7 &lt;int&gt;,</span>
<span class="co">#&gt; #   loc_8 &lt;int&gt;, loc_9 &lt;int&gt;, loc_10 &lt;int&gt;, known_2 &lt;int&gt;, known_3 &lt;int&gt;,</span>
<span class="co">#&gt; #   n_visible_out &lt;dbl&gt;, known_visible_out &lt;dbl&gt;, hidden_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   type_00_visible_out &lt;dbl&gt;, type_01_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   type_10_visible_out &lt;dbl&gt;, type_11_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   service_use_visible_out &lt;dbl&gt;, loc_1_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   loc_2_visible_out &lt;dbl&gt;, loc_3_visible_out &lt;dbl&gt;, …</span></code></pre></div>
<div id="show-the-network" class="section level3">
<h3 class="hasAnchor">
<a href="#show-the-network" class="anchor"></a>Show the network</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">g</span> <span class="op">&lt;-</span>
  <span class="va">example_pop</span> <span class="op">%$%</span> <span class="op">{</span>
    <span class="fu">hiddenmeta</span><span class="fu">:::</span><span class="fu">retrieve_graph</span><span class="op">(</span><span class="va">links</span><span class="op">)</span> <span class="op">%&gt;%</span>
      <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/set_vertex_attr.html">set_vertex_attr</a></span><span class="op">(</span><span class="st">"name"</span>, value <span class="op">=</span> <span class="va">name</span><span class="op">)</span> <span class="op">%&gt;%</span>
      <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/set_vertex_attr.html">set_vertex_attr</a></span><span class="op">(</span><span class="st">"type"</span>, value <span class="op">=</span> <span class="va">type</span><span class="op">)</span>
  <span class="op">}</span>

<span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">color</span> <span class="op">&lt;-</span>
  <span class="fu">plyr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mapvalues.html">mapvalues</a></span><span class="op">(</span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">type</span>,
                  from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">type</span><span class="op">)</span>,
                  to <span class="op">=</span> <span class="fu">grDevices</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palette.html">palette.colors</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">type</span><span class="op">)</span><span class="op">)</span>, 
                                                 palette <span class="op">=</span> <span class="st">"Set 3"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">g</span>,
     <span class="co"># layout = igraph::layout_on_grid(g, dim = 2, width = 100),</span>
     layout <span class="op">=</span> <span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/layout_on_grid.html">layout_on_grid</a></span><span class="op">(</span><span class="va">g</span>, dim <span class="op">=</span> <span class="fl">2</span>, width <span class="op">=</span> <span class="fl">150</span><span class="op">)</span>,
     vertex.size <span class="op">=</span> <span class="fl">1.5</span>, vertex.dist <span class="op">=</span> <span class="fl">4</span>, vertex.label <span class="op">=</span> <span class="cn">NA</span>, edge.width <span class="op">=</span> <span class="fl">.2</span>,
     edge.arrow.size <span class="op">=</span> <span class="fl">.2</span>, edge.curved <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, y <span class="op">=</span> <span class="op">-</span><span class="fl">1.2</span>,
       legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"none"</span>, <span class="st">"known only"</span>, <span class="st">"hidden only"</span>, <span class="st">"both"</span><span class="op">)</span>,
       pt.bg <span class="op">=</span> <span class="fu">grDevices</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palette.html">palette.colors</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/V.html">V</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">$</span><span class="va">type</span><span class="op">)</span><span class="op">)</span>, palette <span class="op">=</span> <span class="st">"Set 3"</span><span class="op">)</span>,
       pch <span class="op">=</span> <span class="fl">21</span>, col <span class="op">=</span> <span class="st">"#777777"</span>, pt.cex <span class="op">=</span> <span class="fl">1</span>, cex <span class="op">=</span> <span class="fl">1</span>, bty <span class="op">=</span> <span class="st">"o"</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="articles/vignette-plot_pop_network-1.png"><!-- --></p>
</div>
</div>
<div id="step-3-declare-all-relevant-study-sampling-procedures" class="section level2">
<h2 class="hasAnchor">
<a href="#step-3-declare-all-relevant-study-sampling-procedures" class="anchor"></a>Step 3. Declare all relevant study sampling procedures</h2>
<p>The sampling procedures are additive in a sense that each procedure appends several columns relevant to the sampling procedure and particular draw based on population simulation, but does not change the study population data frame (unless you specify <code>drop_nonsampled = TRUE</code>).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">study_sample_rds</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_sampling</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">sample</span><span class="op">$</span><span class="va">rds</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span>
<span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/draw_functions.html">draw_data</a></span><span class="op">(</span><span class="va">study_population</span> <span class="op">+</span> <span class="va">study_sample_rds</span><span class="op">)</span> <span class="op">%&gt;%</span>  
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; # A tibble: 1,000 × 84</span>
<span class="co">#&gt;     name type  known hidden links      service_use loc_1 loc_2 loc_3 loc_4 loc_5</span>
<span class="co">#&gt;    &lt;int&gt; &lt;chr&gt; &lt;int&gt;  &lt;int&gt; &lt;chr&gt;            &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1     6 00        0      0 207;243;3…           0     0     0     0     0     0</span>
<span class="co">#&gt;  2   100 00        0      0 253;364;5…           1     0     0     0     0     0</span>
<span class="co">#&gt;  3   502 00        0      0 59;183;19…           0     0     0     0     0     0</span>
<span class="co">#&gt;  4   741 10        1      0 178;256;3…           0     0     0     0     0     0</span>
<span class="co">#&gt;  5   971 11        1      1 16;46;75;…           0     0     1     0     0     0</span>
<span class="co">#&gt;  6   102 00        0      0 56;63;78;…           0     0     0     0     0     0</span>
<span class="co">#&gt;  7   204 00        0      0 34;85;219…           0     0     0     0     0     0</span>
<span class="co">#&gt;  8   764 10        1      0 215;250;6…           1     0     0     0     1     0</span>
<span class="co">#&gt;  9   193 00        0      0 10;20;208…           1     0     1     0     0     0</span>
<span class="co">#&gt; 10   523 00        0      0 1;176;205…           1     0     0     0     0     0</span>
<span class="co">#&gt; # … with 990 more rows, and 73 more variables: loc_6 &lt;int&gt;, loc_7 &lt;int&gt;,</span>
<span class="co">#&gt; #   loc_8 &lt;int&gt;, loc_9 &lt;int&gt;, loc_10 &lt;int&gt;, known_2 &lt;int&gt;, known_3 &lt;int&gt;,</span>
<span class="co">#&gt; #   n_visible_out &lt;dbl&gt;, known_visible_out &lt;dbl&gt;, hidden_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   type_00_visible_out &lt;dbl&gt;, type_01_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   type_10_visible_out &lt;dbl&gt;, type_11_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   service_use_visible_out &lt;dbl&gt;, loc_1_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   loc_2_visible_out &lt;dbl&gt;, loc_3_visible_out &lt;dbl&gt;, …</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">study_sample_pps</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_sampling</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">sample</span><span class="op">$</span><span class="va">pps</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span>
<span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/draw_functions.html">draw_data</a></span><span class="op">(</span><span class="va">study_population</span> <span class="op">+</span> <span class="va">study_sample_rds</span> <span class="op">+</span> <span class="va">study_sample_pps</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; # A tibble: 1,000 × 92</span>
<span class="co">#&gt;     name type  known hidden links      service_use loc_1 loc_2 loc_3 loc_4 loc_5</span>
<span class="co">#&gt;    &lt;int&gt; &lt;chr&gt; &lt;int&gt;  &lt;int&gt; &lt;chr&gt;            &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1   171 00        0      0 216;217;5…           0     0     0     0     0     0</span>
<span class="co">#&gt;  2   214 00        0      0 29;114;12…           0     0     1     0     0     0</span>
<span class="co">#&gt;  3   589 00        0      0 36;845;858           0     0     0     0     0     0</span>
<span class="co">#&gt;  4   561 00        0      0 10;187;29…           0     0     0     0     0     0</span>
<span class="co">#&gt;  5   909 01        0      1 60;75;95;…           0     0     0     0     1     0</span>
<span class="co">#&gt;  6   682 10        1      0 55;157;16…           1     0     0     0     0     0</span>
<span class="co">#&gt;  7   421 00        0      0 83;268;44…           1     0     0     0     0     0</span>
<span class="co">#&gt;  8   347 00        0      0 315;337;3…           0     0     0     0     0     0</span>
<span class="co">#&gt;  9   595 00        0      0 43;48;50;…           1     0     0     0     0     0</span>
<span class="co">#&gt; 10   847 10        1      0 35;77;136…           0     0     0     0     0     0</span>
<span class="co">#&gt; # … with 990 more rows, and 81 more variables: loc_6 &lt;int&gt;, loc_7 &lt;int&gt;,</span>
<span class="co">#&gt; #   loc_8 &lt;int&gt;, loc_9 &lt;int&gt;, loc_10 &lt;int&gt;, known_2 &lt;int&gt;, known_3 &lt;int&gt;,</span>
<span class="co">#&gt; #   n_visible_out &lt;dbl&gt;, known_visible_out &lt;dbl&gt;, hidden_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   type_00_visible_out &lt;dbl&gt;, type_01_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   type_10_visible_out &lt;dbl&gt;, type_11_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   service_use_visible_out &lt;dbl&gt;, loc_1_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   loc_2_visible_out &lt;dbl&gt;, loc_3_visible_out &lt;dbl&gt;, …</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">study_sample_tls</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_sampling</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">sample</span><span class="op">$</span><span class="va">tls</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span>
<span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/draw_functions.html">draw_data</a></span><span class="op">(</span><span class="va">study_population</span> <span class="op">+</span> 
            <span class="va">study_sample_rds</span> <span class="op">+</span> <span class="va">study_sample_pps</span> <span class="op">+</span> <span class="va">study_sample_tls</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> 
<span class="co">#&gt; # A tibble: 1,000 × 97</span>
<span class="co">#&gt;     name type  known hidden links      service_use loc_1 loc_2 loc_3 loc_4 loc_5</span>
<span class="co">#&gt;    &lt;int&gt; &lt;chr&gt; &lt;int&gt;  &lt;int&gt; &lt;chr&gt;            &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1   744 10        1      0 38;81;95;…           0     0     0     0     0     0</span>
<span class="co">#&gt;  2   574 00        0      0 93;120;19…           0     0     0     0     0     0</span>
<span class="co">#&gt;  3   278 00        0      0 182;226;3…           1     0     0     0     0     0</span>
<span class="co">#&gt;  4   798 10        1      0 10;408;44…           0     0     0     0     0     0</span>
<span class="co">#&gt;  5   318 00        0      0 65;98;133…           0     0     0     0     0     0</span>
<span class="co">#&gt;  6   526 00        0      0 181;267;2…           0     0     0     0     0     0</span>
<span class="co">#&gt;  7   512 00        0      0 47;405;72…           0     1     0     0     0     0</span>
<span class="co">#&gt;  8   682 10        1      0 55;157;16…           1     0     0     0     0     0</span>
<span class="co">#&gt;  9   556 00        0      0 362;413;5…           1     0     0     0     0     0</span>
<span class="co">#&gt; 10   656 10        1      0 12;464;46…           1     0     0     0     0     0</span>
<span class="co">#&gt; # … with 990 more rows, and 86 more variables: loc_6 &lt;int&gt;, loc_7 &lt;int&gt;,</span>
<span class="co">#&gt; #   loc_8 &lt;int&gt;, loc_9 &lt;int&gt;, loc_10 &lt;int&gt;, known_2 &lt;int&gt;, known_3 &lt;int&gt;,</span>
<span class="co">#&gt; #   n_visible_out &lt;dbl&gt;, known_visible_out &lt;dbl&gt;, hidden_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   type_00_visible_out &lt;dbl&gt;, type_01_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   type_10_visible_out &lt;dbl&gt;, type_11_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   service_use_visible_out &lt;dbl&gt;, loc_1_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   loc_2_visible_out &lt;dbl&gt;, loc_3_visible_out &lt;dbl&gt;, …</span></code></pre></div>
</div>
<div id="step-4-declare-study-level-estimands" class="section level2">
<h2 class="hasAnchor">
<a href="#step-4-declare-study-level-estimands" class="anchor"></a>Step 4. Declare study level estimands</h2>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">study_estimands</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_inquiry</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">inquiries</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span>
<span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/draw_functions.html">draw_estimands</a></span><span class="op">(</span><span class="va">study_population</span> <span class="op">+</span> 
                 <span class="co"># study_sample_rds + study_sample_pps + study_sample_tls + </span>
                 <span class="va">study_estimands</span><span class="op">)</span>
<span class="co">#&gt;                inquiry    estimand</span>
<span class="co">#&gt; 1           known_size 318.0000000</span>
<span class="co">#&gt; 2          hidden_size 100.0000000</span>
<span class="co">#&gt; 3           known_prev   0.3180000</span>
<span class="co">#&gt; 4          hidden_prev   0.1000000</span>
<span class="co">#&gt; 5 hidden_size_in_known  38.0000000</span>
<span class="co">#&gt; 6 hidden_prev_in_known   0.1194969</span></code></pre></div>
</div>
<div id="step-5-declare-estimators-used-in-the-study" class="section level2">
<h2 class="hasAnchor">
<a href="#step-5-declare-estimators-used-in-the-study" class="anchor"></a>Step 5. Declare estimators used in the study</h2>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">est_sspse</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">rds</span><span class="op">$</span><span class="va">sspse</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">est_chords</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">rds</span><span class="op">$</span><span class="va">chords</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">est_multi</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">rds</span><span class="op">$</span><span class="va">multiplier</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="va">est_ht_pps</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">pps</span><span class="op">$</span><span class="va">ht</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">est_nsum_pps</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">pps</span><span class="op">$</span><span class="va">nsum</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="va">est_ht_tls</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">tls</span><span class="op">$</span><span class="va">ht</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">est_nsum_tls</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">tls</span><span class="op">$</span><span class="va">nsum</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">est_recap_tls</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">tls</span><span class="op">$</span><span class="va">recap</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="va">est_recap_rds_pps</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">all</span><span class="op">$</span><span class="va">recap1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">est_recap_rds_tls</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/eval.html">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/call.html">as.call</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">declare_estimator</span><span class="op">)</span>, <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span><span class="op">$</span><span class="va">all</span><span class="op">$</span><span class="va">recap2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span>
<span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/draw_functions.html">draw_estimates</a></span><span class="op">(</span><span class="va">study_population</span> <span class="op">+</span>
                 <span class="va">study_sample_rds</span> <span class="op">+</span> <span class="va">study_sample_pps</span> <span class="op">+</span> <span class="va">study_sample_tls</span> <span class="op">+</span>
                 <span class="va">study_estimands</span> <span class="op">+</span>
                 <span class="va">est_sspse</span> <span class="op">+</span> <span class="va">est_chords</span> <span class="op">+</span> <span class="va">est_multi</span> <span class="op">+</span>
                 <span class="va">est_nsum_pps</span> <span class="op">+</span> <span class="va">est_ht_pps</span> <span class="op">+</span>
                 <span class="va">est_nsum_tls</span> <span class="op">+</span> <span class="va">est_ht_tls</span> <span class="op">+</span> <span class="va">est_recap_tls</span> <span class="op">+</span>
                 <span class="va">est_recap_rds_pps</span> <span class="op">+</span> <span class="va">est_recap_rds_tls</span><span class="op">)</span>
<span class="co">#&gt;                    estimator  estimate           se     inquiry</span>
<span class="co">#&gt; 1      hidden_size_rds_sspse 104.00000 2.630451e+01 hidden_size</span>
<span class="co">#&gt; 2     hidden_size_rds_chords  37.00000 2.404814e+01 hidden_size</span>
<span class="co">#&gt; 3      hidden_size_rds_multi 104.00000 2.932858e+01 hidden_size</span>
<span class="co">#&gt; 4       hidden_size_pps_nsum 101.81782 6.319471e+00 hidden_size</span>
<span class="co">#&gt; 5         hidden_size_pps_ht  85.00000 1.985434e+01 hidden_size</span>
<span class="co">#&gt; 6         hidden_prev_pps_ht   0.08500 1.985434e-02 hidden_prev</span>
<span class="co">#&gt; 7       hidden_size_tls_nsum 106.10675 2.365163e+00 hidden_size</span>
<span class="co">#&gt; 8         hidden_size_tls_ht   4.03000 8.516056e-01 hidden_size</span>
<span class="co">#&gt; 9         hidden_prev_tls_ht   0.00403 8.516056e-04 hidden_prev</span>
<span class="co">#&gt; 10     hidden_size_tls_recap  51.07147 2.145948e+01 hidden_size</span>
<span class="co">#&gt; 11 hidden_size_rds_pps_recap  98.81818 1.626866e+01 hidden_size</span>
<span class="co">#&gt; 12 hidden_size_rds_tls_recap  98.83460 9.774056e+00 hidden_size</span></code></pre></div>
</div>
<div id="step-6-declare-full-study" class="section level2">
<h2 class="hasAnchor">
<a href="#step-6-declare-full-study" class="anchor"></a>Step 6. Declare full study</h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">study1</span> <span class="op">&lt;-</span> 
  <span class="va">study_population</span> <span class="op">+</span>
  <span class="va">study_sample_rds</span> <span class="op">+</span> <span class="va">study_sample_pps</span> <span class="op">+</span> <span class="va">study_sample_tls</span> <span class="op">+</span>
  <span class="va">study_estimands</span> <span class="op">+</span>
  <span class="va">est_sspse</span> <span class="op">+</span> <span class="va">est_chords</span> <span class="op">+</span> <span class="va">est_multi</span> <span class="op">+</span>
  <span class="va">est_nsum_pps</span> <span class="op">+</span> <span class="va">est_ht_pps</span> <span class="op">+</span>
  <span class="va">est_nsum_tls</span> <span class="op">+</span> <span class="va">est_ht_tls</span> <span class="op">+</span> <span class="va">est_recap_tls</span> <span class="op">+</span>
  <span class="va">est_recap_rds_pps</span> <span class="op">+</span> <span class="va">est_recap_rds_tls</span>

<span class="co"># can draw one of the samples</span>
<span class="va">study1</span><span class="op">$</span><span class="fu">study_sample_rds</span><span class="op">(</span><span class="va">study1</span><span class="op">$</span><span class="fu">study_population</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1,000 × 84</span>
<span class="co">#&gt;     name type  known hidden links      service_use loc_1 loc_2 loc_3 loc_4 loc_5</span>
<span class="co">#&gt;    &lt;int&gt; &lt;chr&gt; &lt;int&gt;  &lt;int&gt; &lt;chr&gt;            &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1     1 00        0      0 11;136;41…           0     0     0     0     0     1</span>
<span class="co">#&gt;  2     2 00        0      0 88;181;24…           0     0     0     1     0     0</span>
<span class="co">#&gt;  3     3 00        0      0 41;82;260…           1     0     0     0     0     0</span>
<span class="co">#&gt;  4     4 00        0      0 24;212;61…           0     0     0     0     0     0</span>
<span class="co">#&gt;  5     5 00        0      0 43;69;72;…           0     1     0     0     0     0</span>
<span class="co">#&gt;  6     6 00        0      0 53;561;60…           1     0     0     0     1     0</span>
<span class="co">#&gt;  7     7 00        0      0 101;177;2…           0     0     0     0     0     0</span>
<span class="co">#&gt;  8     8 00        0      0 11;157;33…           0     0     0     0     0     1</span>
<span class="co">#&gt;  9     9 00        0      0 14;311;35…           0     0     0     0     0     0</span>
<span class="co">#&gt; 10    10 00        0      0 30;161;21…           0     0     0     0     0     1</span>
<span class="co">#&gt; # … with 990 more rows, and 73 more variables: loc_6 &lt;int&gt;, loc_7 &lt;int&gt;,</span>
<span class="co">#&gt; #   loc_8 &lt;int&gt;, loc_9 &lt;int&gt;, loc_10 &lt;int&gt;, known_2 &lt;int&gt;, known_3 &lt;int&gt;,</span>
<span class="co">#&gt; #   n_visible_out &lt;dbl&gt;, known_visible_out &lt;dbl&gt;, hidden_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   type_00_visible_out &lt;dbl&gt;, type_01_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   type_10_visible_out &lt;dbl&gt;, type_11_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   service_use_visible_out &lt;dbl&gt;, loc_1_visible_out &lt;dbl&gt;,</span>
<span class="co">#&gt; #   loc_2_visible_out &lt;dbl&gt;, loc_3_visible_out &lt;dbl&gt;, …</span>
<span class="co"># can draw full data</span>
<span class="va">study1_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/draw_functions.html">draw_data</a></span><span class="op">(</span><span class="va">study1</span><span class="op">)</span>

<span class="co"># can draw estimands</span>
<span class="va">study1</span><span class="op">$</span><span class="fu">inquiry</span><span class="op">(</span><span class="va">study1_data</span><span class="op">)</span>
<span class="co">#&gt;                inquiry     estimand</span>
<span class="co">#&gt; 1           known_size 313.00000000</span>
<span class="co">#&gt; 2          hidden_size  95.00000000</span>
<span class="co">#&gt; 3           known_prev   0.31300000</span>
<span class="co">#&gt; 4          hidden_prev   0.09500000</span>
<span class="co">#&gt; 5 hidden_size_in_known  22.00000000</span>
<span class="co">#&gt; 6 hidden_prev_in_known   0.07028754</span>
<span class="co"># can draw any of the estimators</span>
<span class="va">study1</span><span class="op">$</span><span class="fu">rds_sspse</span><span class="op">(</span><span class="va">study1_data</span><span class="op">)</span>
<span class="co">#&gt;               estimator estimate       se     inquiry</span>
<span class="co">#&gt; 1 hidden_size_rds_sspse    150.5 92.57726 hidden_size</span>
<span class="va">study1</span><span class="op">$</span><span class="fu">pps_ht</span><span class="op">(</span><span class="va">study1_data</span><span class="op">)</span>
<span class="co">#&gt;            estimator estimate          se     inquiry</span>
<span class="co">#&gt; 1 hidden_size_pps_ht   110.00 23.66712443 hidden_size</span>
<span class="co">#&gt; 2 hidden_prev_pps_ht     0.11  0.02366712 hidden_prev</span>
<span class="va">study1</span><span class="op">$</span><span class="fu">rds_pps_recap</span><span class="op">(</span><span class="va">study1_data</span><span class="op">)</span>
<span class="co">#&gt;                   estimator estimate       se     inquiry</span>
<span class="co">#&gt; 1 hidden_size_rds_pps_recap 92.53333 11.97572 hidden_size</span></code></pre></div>
</div>
<div id="step-7-diagnose-study-design" class="section level2">
<h2 class="hasAnchor">
<a href="#step-7-diagnose-study-design" class="anchor"></a>Step 7. Diagnose study design</h2>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"doParallel"</span>, <span class="st">"parallel"</span><span class="op">)</span><span class="op">)</span>
<span class="fu">doParallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/doParallel/man/registerDoParallel.html">registerDoParallel</a></span><span class="op">(</span>cores <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span>
<span class="va">study1_simulations</span> <span class="op">&lt;-</span>
  <span class="fu">plyr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/llply.html">llply</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/list.html">as.list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>,
    .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
      <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html">suppressWarnings</a></span><span class="op">(</span>
        <span class="fu">DeclareDesign</span><span class="fu">::</span><span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/simulate_design.html">simulate_design</a></span><span class="op">(</span><span class="va">study1</span>, sims <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span>
          <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
            sim_ID <span class="op">=</span> <span class="va">x</span>
          <span class="op">)</span>
      <span class="op">)</span>
    <span class="op">}</span>,
    .parallel <span class="op">=</span> <span class="cn">TRUE</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span><span class="va">study1_simulations</span>, <span class="st">"vignettes/study1_sim.rds"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">study_diagnosands</span> <span class="op">&lt;-</span>
 <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_diagnosands.html">declare_diagnosands</a></span><span class="op">(</span>
    mean_estimand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">estimand</span><span class="op">)</span>,
    mean_estimate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">estimate</span><span class="op">)</span>,
    sd_estimate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">estimate</span><span class="op">)</span>,
    mean_se <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">se</span><span class="op">)</span>,
    bias <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">estimate</span> <span class="op">-</span> <span class="va">estimand</span><span class="op">)</span>,
    rmse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="op">(</span><span class="va">estimate</span> <span class="op">-</span> <span class="va">estimand</span><span class="op">)</span> <span class="op">^</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span>

<span class="va">study1_simulations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"vignettes/study1_sim.rds"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/diagnose_design.html">diagnose_design</a></span><span class="op">(</span>simulations_df <span class="op">=</span> <span class="va">study1_simulations</span>, 
                diagnosands <span class="op">=</span> <span class="va">study_diagnosands</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="va">reshape_diagnosis</span> <span class="op">%&gt;%</span> <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="st">'Design'</span><span class="op">)</span>
<span class="co">#&gt;                 Inquiry                 Estimator N Sims Mean Estimand</span>
<span class="co">#&gt; 1           hidden_prev        hidden_prev_pps_ht    100          0.10</span>
<span class="co">#&gt; 2                                                               (0.00)</span>
<span class="co">#&gt; 3           hidden_prev        hidden_prev_tls_ht    100          0.10</span>
<span class="co">#&gt; 4                                                               (0.00)</span>
<span class="co">#&gt; 5  hidden_prev_in_known                      &lt;NA&gt;    100          0.09</span>
<span class="co">#&gt; 6                                                               (0.00)</span>
<span class="co">#&gt; 7           hidden_size        hidden_size_pps_ht    100         95.17</span>
<span class="co">#&gt; 8                                                               (0.57)</span>
<span class="co">#&gt; 9           hidden_size      hidden_size_pps_nsum    100         95.17</span>
<span class="co">#&gt; 10                                                              (0.57)</span>
<span class="co">#&gt; 11          hidden_size    hidden_size_rds_chords    100         95.17</span>
<span class="co">#&gt; 12                                                              (0.57)</span>
<span class="co">#&gt; 13          hidden_size     hidden_size_rds_multi    100         95.17</span>
<span class="co">#&gt; 14                                                              (0.57)</span>
<span class="co">#&gt; 15          hidden_size hidden_size_rds_pps_recap    100         95.17</span>
<span class="co">#&gt; 16                                                              (0.57)</span>
<span class="co">#&gt; 17          hidden_size     hidden_size_rds_sspse    100         95.17</span>
<span class="co">#&gt; 18                                                              (0.57)</span>
<span class="co">#&gt; 19          hidden_size hidden_size_rds_tls_recap    100         95.17</span>
<span class="co">#&gt; 20                                                              (0.57)</span>
<span class="co">#&gt; 21          hidden_size        hidden_size_tls_ht    100         95.17</span>
<span class="co">#&gt; 22                                                              (0.57)</span>
<span class="co">#&gt; 23          hidden_size      hidden_size_tls_nsum    100         95.17</span>
<span class="co">#&gt; 24                                                              (0.57)</span>
<span class="co">#&gt; 25          hidden_size     hidden_size_tls_recap    100         95.17</span>
<span class="co">#&gt; 26                                                              (0.57)</span>
<span class="co">#&gt; 27 hidden_size_in_known                      &lt;NA&gt;    100         27.35</span>
<span class="co">#&gt; 28                                                              (0.34)</span>
<span class="co">#&gt; 29           known_prev                      &lt;NA&gt;    100          0.30</span>
<span class="co">#&gt; 30                                                              (0.00)</span>
<span class="co">#&gt; 31           known_size                      &lt;NA&gt;    100        301.35</span>
<span class="co">#&gt; 32                                                              (0.97)</span>
<span class="co">#&gt;    Mean Estimate SD Estimate Mean Se   Bias   RMSE</span>
<span class="co">#&gt; 1           0.11        0.03    0.02   0.01   0.03</span>
<span class="co">#&gt; 2         (0.00)      (0.00)  (0.00) (0.00) (0.00)</span>
<span class="co">#&gt; 3           0.00        0.00    0.00  -0.09   0.09</span>
<span class="co">#&gt; 4         (0.00)      (0.00)  (0.00) (0.00) (0.00)</span>
<span class="co">#&gt; 5             NA          NA      NA     NA     NA</span>
<span class="co">#&gt; 6             NA          NA      NA     NA     NA</span>
<span class="co">#&gt; 7         106.50       28.15   21.77  11.33  27.10</span>
<span class="co">#&gt; 8         (2.75)      (2.32)  (0.27) (2.45) (2.18)</span>
<span class="co">#&gt; 9          99.37       12.57    6.71   4.20   9.68</span>
<span class="co">#&gt; 10        (1.14)      (1.04)  (0.07) (0.76) (0.72)</span>
<span class="co">#&gt; 11         77.37       38.38   35.41 -17.80  43.65</span>
<span class="co">#&gt; 12        (3.95)      (2.28)  (0.81) (4.10) (1.92)</span>
<span class="co">#&gt; 13         91.42       13.31   23.72  -3.75  13.59</span>
<span class="co">#&gt; 14        (1.39)      (1.17)  (1.02) (1.39) (0.98)</span>
<span class="co">#&gt; 15        101.07       19.64   15.32   5.90  17.13</span>
<span class="co">#&gt; 16        (1.90)      (1.40)  (0.60) (1.62) (1.28)</span>
<span class="co">#&gt; 17        159.71       32.63   92.65  64.54  72.41</span>
<span class="co">#&gt; 18        (3.03)      (4.67)  (3.82) (3.04) (4.44)</span>
<span class="co">#&gt; 19         98.38       11.34   10.23   3.21  11.04</span>
<span class="co">#&gt; 20        (1.23)      (0.78)  (0.29) (1.12) (0.83)</span>
<span class="co">#&gt; 21          3.43        1.15    0.90 -91.74  91.91</span>
<span class="co">#&gt; 22        (0.11)      (0.07)  (0.02) (0.53) (0.54)</span>
<span class="co">#&gt; 23         98.73       14.26    7.60   3.56  11.03</span>
<span class="co">#&gt; 24        (1.53)      (1.10)  (0.31) (1.14) (0.86)</span>
<span class="co">#&gt; 25         33.72       15.29   13.19 -61.45  63.34</span>
<span class="co">#&gt; 26        (1.76)      (3.00)  (1.54) (1.70) (1.25)</span>
<span class="co">#&gt; 27            NA          NA      NA     NA     NA</span>
<span class="co">#&gt; 28            NA          NA      NA     NA     NA</span>
<span class="co">#&gt; 29            NA          NA      NA     NA     NA</span>
<span class="co">#&gt; 30            NA          NA      NA     NA     NA</span>
<span class="co">#&gt; 31            NA          NA      NA     NA     NA</span>
<span class="co">#&gt; 32            NA          NA      NA     NA     NA</span></code></pre></div>
</div>
<div id="multi-study-declaration" class="section level2">
<h2 class="hasAnchor">
<a href="#multi-study-declaration" class="anchor"></a>Multi study declaration</h2>
<div id="additional-study" class="section level3">
<h3 class="hasAnchor">
<a href="#additional-study" class="anchor"></a>Additional study</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">study_2</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    pop <span class="op">=</span> 
      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        handler <span class="op">=</span> <span class="va">get_study_population</span>,
        network_handler <span class="op">=</span> <span class="va">sim_block_network</span>,
        network_handler_args <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">5000</span>, K <span class="op">=</span> <span class="fl">3</span>, 
               prev_K <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>frame <span class="op">=</span> <span class="fl">.5</span>, known <span class="op">=</span> <span class="fl">.2</span>, hidden <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span>, 
               rho_K <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.05</span>, <span class="fl">.05</span>, <span class="fl">.05</span><span class="op">)</span>,
               p_edge_within <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>frame <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.05</span><span class="op">)</span>, 
                                    known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.05</span><span class="op">)</span>, 
                                    hidden <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.9</span><span class="op">)</span><span class="op">)</span>,
               p_edge_between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>frame <span class="op">=</span> <span class="fl">0.05</span>, 
                                     known <span class="op">=</span> <span class="fl">0.1</span>, 
                                     hidden <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span>,
               directed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,
        
        group_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"frame"</span>, <span class="st">"known"</span>, <span class="st">"hidden"</span><span class="op">)</span>,
        
        <span class="co"># probability of visibility (show-up) for each group</span>
        p_visible <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>frame <span class="op">=</span> <span class="fl">1</span>, known <span class="op">=</span> <span class="fl">1</span>, hidden <span class="op">=</span> <span class="fl">.6</span><span class="op">)</span>,
        
        <span class="co"># probability of service utilization in hidden population</span>
        <span class="co"># for service multiplier</span>
        
        add_groups <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>service_use <span class="op">=</span> <span class="st">"rbinom(n(), 1, 0.25 + hidden * 0.3)"</span>,
               <span class="st">"purrr::map_df(hidden, ~ sapply( `names&lt;-`(runif(10, 0.05,.3), paste0('loc_', 1:10)), function(add) rbinom(length(.x), 1, 0.1 + .x * add)))"</span>,
               known_2 <span class="op">=</span> <span class="fl">0.1</span>, known_3 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>
      <span class="op">)</span>,
    sample <span class="op">=</span> 
      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        rds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_rds</span>,
                   <span class="co"># RDS parameters</span>
                   sampling_variable <span class="op">=</span> <span class="st">"rds"</span>,
                   hidden_var <span class="op">=</span> <span class="st">"hidden"</span>,
                   n_seed <span class="op">=</span> <span class="fl">100</span>,
                   n_coupons <span class="op">=</span> <span class="fl">3</span>,
                   target_type <span class="op">=</span> <span class="st">"waves"</span>,
                   target_n_rds <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,
        tls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_tls</span>,
                   sampling_variable <span class="op">=</span> <span class="st">"tls"</span>,
                   <span class="co"># TLS sampling parameters</span>
                   target_n_clusters <span class="op">=</span> <span class="fl">4</span>,
                   target_n_tls <span class="op">=</span> <span class="fl">300</span>,
                   cluster <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span><span class="op">)</span>,
        pps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_pps</span>,
                   sampling_variable <span class="op">=</span> <span class="st">"pps"</span>,
                   <span class="co"># prop sampling parameters</span>
                   sampling_frame <span class="op">=</span> <span class="st">"frame"</span>,
                   strata <span class="op">=</span> <span class="cn">NULL</span>,
                   cluster <span class="op">=</span> <span class="cn">NULL</span>,
                   target_n_pps <span class="op">=</span> <span class="fl">800</span><span class="op">)</span>
      <span class="op">)</span>,
    inquiries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_estimands</span>,
                     known_pattern <span class="op">=</span> <span class="st">"^known$|^frame$"</span>, 
                     hidden_var <span class="op">=</span> <span class="st">"hidden"</span><span class="op">)</span>,
    estimators <span class="op">=</span> 
      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        rds <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>sspse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_sspse</span>, 
                            label <span class="op">=</span> <span class="st">"rds_sspse"</span>,
                            prior_mean <span class="op">=</span> <span class="fl">450</span>,
                            mcmc_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>interval <span class="op">=</span> <span class="fl">5</span>, burnin <span class="op">=</span> <span class="fl">2000</span>, samplesize <span class="op">=</span> <span class="fl">500</span><span class="op">)</span>,
                            total <span class="op">=</span> <span class="fl">5000</span>,
                            rds_prefix <span class="op">=</span> <span class="st">"rds"</span><span class="op">)</span>,
               chords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_chords</span>, 
                             type <span class="op">=</span> <span class="st">"mle"</span>,
                             label <span class="op">=</span> <span class="st">"rds_chords"</span>,
                             seed_condition <span class="op">=</span> <span class="st">"rds_from == -999"</span>,
                             n_boot <span class="op">=</span> <span class="fl">100</span>,
                             rds_prefix <span class="op">=</span> <span class="st">"rds"</span><span class="op">)</span>,
               multiplier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_multiplier</span>, 
                                 service_var <span class="op">=</span> <span class="st">"service_use"</span>,
                                 seed_condition <span class="op">=</span> <span class="st">"rds_from == -999"</span>,
                                 n_boot <span class="op">=</span> <span class="fl">100</span>,
                                 rds_prefix <span class="op">=</span> <span class="st">"rds"</span>,
                                 label <span class="op">=</span> <span class="st">"rds_multi"</span><span class="op">)</span><span class="op">)</span>,
        tls <span class="op">=</span>
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>ht <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_ht</span>,
                         weight_var <span class="op">=</span> <span class="st">"tls_weight"</span>,
                         prefix <span class="op">=</span> <span class="st">"tls"</span>,
                         label <span class="op">=</span> <span class="st">"tls_ht"</span><span class="op">)</span>,
               nsum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_nsum</span>,
                           known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="st">"frame"</span><span class="op">)</span>,
                           hidden <span class="op">=</span> <span class="st">"hidden_visible_out"</span>,
                           survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">tls_cluster</span>,
                           n_boot <span class="op">=</span> <span class="fl">100</span>,
                           prefix <span class="op">=</span> <span class="st">"tls"</span>,
                           label <span class="op">=</span> <span class="st">"tls_nsum"</span><span class="op">)</span>,
               recap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,
                            capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span>,
                            sample_condition <span class="op">=</span> <span class="st">"tls == 1"</span>,
                            model <span class="op">=</span> <span class="st">"Mt"</span>,
                            hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,
                            label <span class="op">=</span> <span class="st">"tls_recap"</span><span class="op">)</span><span class="op">)</span>,
        pps <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
            ht <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_ht</span>, 
                      label <span class="op">=</span> <span class="st">"pps_ht"</span><span class="op">)</span>,
            nsum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_nsum</span>,
                        known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"frame"</span>, <span class="st">"known"</span><span class="op">)</span>,
                        hidden <span class="op">=</span> <span class="st">"hidden_visible_out"</span>,
                        survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">pps_cluster</span> <span class="op">+</span> <span class="fu">strata</span><span class="op">(</span><span class="va">pps_strata</span><span class="op">)</span>,
                        n_boot <span class="op">=</span> <span class="fl">100</span>,
                        label <span class="op">=</span> <span class="st">"pps_nsum"</span><span class="op">)</span><span class="op">)</span>,
        all <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>recap1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,
                             capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rds"</span>, <span class="st">"pps"</span><span class="op">)</span>,
                             model <span class="op">=</span> <span class="st">"Mt"</span>,
                             hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,
                             label <span class="op">=</span> <span class="st">"rds_pps_recap"</span><span class="op">)</span>,
               recap2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,
                             capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rds"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span><span class="op">)</span>,
                             model <span class="op">=</span> <span class="st">"Mt"</span>,
                             hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,
                             label <span class="op">=</span> <span class="st">"rds_tls_recap"</span><span class="op">)</span><span class="op">)</span>
      <span class="op">)</span>
  <span class="op">)</span>

<span class="va">study_3</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    pop <span class="op">=</span> 
      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        handler <span class="op">=</span> <span class="va">get_study_population</span>,
        
        <span class="co"># network structure setup</span>
        network_handler <span class="op">=</span> <span class="va">sim_block_network</span>,
        network_handler_args <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">2000</span>, K <span class="op">=</span> <span class="fl">2</span>, prev_K <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fl">.3</span>, hidden <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span>, rho_K <span class="op">=</span> <span class="fl">.3</span>,
               p_edge_within <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.1</span><span class="op">)</span>, hidden <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.7</span><span class="op">)</span><span class="op">)</span>,
               p_edge_between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fl">0.05</span>, hidden <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,
               directed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,
        
        <span class="co"># groups</span>
        group_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="st">"hidden"</span><span class="op">)</span>,
        
        <span class="co"># probability of visibility (show-up) for each group</span>
        p_visible <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>known <span class="op">=</span> <span class="fl">1</span>, hidden <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span>,
        
        <span class="co"># probability of service utilization in hidden population</span>
        <span class="co"># for service multiplier</span>
        add_groups <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>service_use <span class="op">=</span> <span class="st">"rbinom(n(), 1, 0.25 + hidden * 0.05)"</span>,
         <span class="st">"purrr::map_df(hidden, ~ sapply( `names&lt;-`(c(.2, .1, .3, .2), paste0('loc_', 1:4)), function(add) rbinom(length(.x), 1, 0.1 + .x * add)))"</span>,
         known_2 <span class="op">=</span> <span class="fl">0.1</span>, known_3 <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>
      <span class="op">)</span>,
    sample <span class="op">=</span> 
      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        rds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_rds</span>,
                   <span class="co"># RDS parameters</span>
                   sampling_variable <span class="op">=</span> <span class="st">"rds"</span>,
                   hidden_var <span class="op">=</span> <span class="st">"hidden"</span>, <span class="co"># default</span>
                   n_seed <span class="op">=</span> <span class="fl">20</span>,
                   n_coupons <span class="op">=</span> <span class="fl">3</span>,
                   target_type <span class="op">=</span> <span class="st">"sample"</span>,
                   target_n_rds <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,
        tls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_tls</span>,
                   sampling_variable <span class="op">=</span> <span class="st">"tls"</span>,
                   <span class="co"># TLS sampling parameters</span>
                   target_n_clusters <span class="op">=</span> <span class="fl">3</span>,
                   target_n_tls <span class="op">=</span> <span class="fl">300</span>,
                   cluster <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span>,
        pps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">sample_pps</span>,
                   sampling_variable <span class="op">=</span> <span class="st">"pps"</span>,
                   <span class="co"># prop sampling parameters</span>
                   sampling_frame <span class="op">=</span> <span class="cn">NULL</span>,
                   strata <span class="op">=</span> <span class="cn">NULL</span>,
                   cluster <span class="op">=</span> <span class="cn">NULL</span>,
                   target_n_pps <span class="op">=</span> <span class="fl">400</span><span class="op">)</span>
      <span class="op">)</span>,
    inquiries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_estimands</span>,
                     known_pattern <span class="op">=</span> <span class="st">"^known$"</span>, 
                     hidden_var <span class="op">=</span> <span class="st">"hidden"</span><span class="op">)</span>,
    estimators <span class="op">=</span> 
      <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        rds <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>sspse <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_sspse</span>,
                            prior_mean <span class="op">=</span> <span class="fl">200</span>,
                            mcmc_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>interval <span class="op">=</span> <span class="fl">5</span>, burnin <span class="op">=</span> <span class="fl">2000</span>, samplesize <span class="op">=</span> <span class="fl">500</span><span class="op">)</span>,
                            total <span class="op">=</span> <span class="fl">2000</span>,
                            rds_prefix <span class="op">=</span> <span class="st">"rds"</span>, 
                            label <span class="op">=</span> <span class="st">"rds_sspse"</span><span class="op">)</span>,
               chords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_chords</span>, 
                             type <span class="op">=</span> <span class="st">"mle"</span>,
                             seed_condition <span class="op">=</span> <span class="st">"rds_from == -999"</span>,
                             n_boot <span class="op">=</span> <span class="fl">100</span>,
                             rds_prefix <span class="op">=</span> <span class="st">"rds"</span>,
                             label <span class="op">=</span> <span class="st">"rds_chords"</span><span class="op">)</span>,
               multiplier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_multiplier</span>, 
                                 service_var <span class="op">=</span> <span class="st">"service_use"</span>,
                                 seed_condition <span class="op">=</span> <span class="st">"rds_from == -999"</span>,
                                 n_boot <span class="op">=</span> <span class="fl">100</span>,
                                 rds_prefix <span class="op">=</span> <span class="st">"rds"</span>,
                                 label <span class="op">=</span> <span class="st">"rds_multi"</span><span class="op">)</span><span class="op">)</span>,
        tls <span class="op">=</span>
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>ht <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_ht</span>,
                         weight_var <span class="op">=</span> <span class="st">"tls_weight"</span>,
                         prefix <span class="op">=</span> <span class="st">"tls"</span>,
                         label <span class="op">=</span> <span class="st">"tls_ht"</span><span class="op">)</span>,
               nsum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_nsum</span>,
                           known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="st">"known_2"</span>, <span class="st">"known_3"</span><span class="op">)</span>,
                           hidden <span class="op">=</span> <span class="st">"hidden_visible_out"</span>,
                           survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">tls_cluster</span>,
                           n_boot <span class="op">=</span> <span class="fl">100</span>,
                           prefix <span class="op">=</span> <span class="st">"tls"</span>,
                           label <span class="op">=</span> <span class="st">"tls_nsum"</span><span class="op">)</span>,
               recap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,
                            capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>,
                            sample_condition <span class="op">=</span> <span class="st">"tls == 1"</span>,
                            model <span class="op">=</span> <span class="st">"Mt"</span>,
                            hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,
                            label <span class="op">=</span> <span class="st">"tls_recap"</span><span class="op">)</span><span class="op">)</span>,
        pps <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>ht <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_ht</span>,
                         prefix <span class="op">=</span> <span class="st">"pps"</span>,
                         label <span class="op">=</span> <span class="st">"pps_ht"</span><span class="op">)</span>,
               nsum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_nsum</span>,
                           known <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"known"</span>, <span class="st">"known_2"</span>, <span class="st">"known_3"</span><span class="op">)</span>,
                           hidden <span class="op">=</span> <span class="st">"hidden_visible_out"</span>,
                           survey_design <span class="op">=</span> <span class="op">~</span> <span class="va">pps_cluster</span> <span class="op">+</span> <span class="fu">strata</span><span class="op">(</span><span class="va">pps_strata</span><span class="op">)</span>,
                           n_boot <span class="op">=</span> <span class="fl">100</span>,
                           prefix <span class="op">=</span> <span class="st">"pps"</span>,
                           label <span class="op">=</span> <span class="st">"pps_nsum"</span><span class="op">)</span><span class="op">)</span>,
        all <span class="op">=</span> 
          <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>recap1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,
                             capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rds"</span>, <span class="st">"pps"</span><span class="op">)</span>,
                             model <span class="op">=</span> <span class="st">"Mt"</span>,
                             hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,
                             label <span class="op">=</span> <span class="st">"rds_pps_recap"</span><span class="op">)</span>,
               recap2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_study_est_recapture</span>,
                             capture_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rds"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"loc_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span>,
                             model <span class="op">=</span> <span class="st">"Mt"</span>,
                             hidden_variable <span class="op">=</span> <span class="st">"hidden"</span>,
                             label <span class="op">=</span> <span class="st">"rds_tls_recap"</span><span class="op">)</span><span class="op">)</span>
      <span class="op">)</span>
  <span class="op">)</span></code></pre></div>
</div>
<div id="declare-multiple-studies" class="section level3">
<h3 class="hasAnchor">
<a href="#declare-multiple-studies" class="anchor"></a>Declare multiple studies</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">multi_population</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_population.html">declare_population</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_multi_populations</span>, 
                     pops_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>study_1 <span class="op">=</span> <span class="va">study_1</span><span class="op">$</span><span class="va">pop</span>,
                                      study_2 <span class="op">=</span> <span class="va">study_2</span><span class="op">$</span><span class="va">pop</span>,
                                      study_3 <span class="op">=</span> <span class="va">study_3</span><span class="op">$</span><span class="va">pop</span><span class="op">)</span><span class="op">)</span>

<span class="va">multi_sampling</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_sampling.html">declare_sampling</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_multi_samples</span>, 
                   samples_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>study_1 <span class="op">=</span> <span class="va">study_1</span><span class="op">$</span><span class="va">sample</span>,
                                       study_2 <span class="op">=</span> <span class="va">study_2</span><span class="op">$</span><span class="va">sample</span>,
                                       study_3 <span class="op">=</span> <span class="va">study_3</span><span class="op">$</span><span class="va">sample</span><span class="op">)</span><span class="op">)</span> 

<span class="va">multi_inquiry</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_inquiry.html">declare_inquiry</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_multi_estimands</span>, 
                  inquiries_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>study_1 <span class="op">=</span> <span class="va">study_1</span><span class="op">$</span><span class="va">inquiries</span>,
                                        study_2 <span class="op">=</span> <span class="va">study_2</span><span class="op">$</span><span class="va">inquiries</span>,
                                        study_3 <span class="op">=</span> <span class="va">study_3</span><span class="op">$</span><span class="va">inquiries</span><span class="op">)</span><span class="op">)</span> 

<span class="va">multi_estimators</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_estimator.html">declare_estimator</a></span><span class="op">(</span>handler <span class="op">=</span> <span class="va">get_multi_estimates</span>,
                    estimators_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>study_1 <span class="op">=</span> <span class="va">study_1</span><span class="op">$</span><span class="va">estimators</span>,
                                           study_2 <span class="op">=</span> <span class="va">study_2</span><span class="op">$</span><span class="va">estimators</span>,
                                           study_3 <span class="op">=</span> <span class="va">study_3</span><span class="op">$</span><span class="va">estimators</span><span class="op">)</span><span class="op">)</span>

<span class="va">multi_study</span> <span class="op">&lt;-</span> <span class="va">multi_population</span> <span class="op">+</span> <span class="va">multi_sampling</span> <span class="op">+</span> <span class="va">multi_inquiry</span> <span class="op">+</span> <span class="va">multi_estimators</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span>
<span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/draw_functions.html">draw_estimands</a></span><span class="op">(</span><span class="va">multi_study</span><span class="op">)</span>
<span class="co">#&gt;                         inquiry     estimand</span>
<span class="co">#&gt; 1            study_1_known_size  318.0000000</span>
<span class="co">#&gt; 2           study_1_hidden_size  100.0000000</span>
<span class="co">#&gt; 3            study_1_known_prev    0.3180000</span>
<span class="co">#&gt; 4           study_1_hidden_prev    0.1000000</span>
<span class="co">#&gt; 5  study_1_hidden_size_in_known   38.0000000</span>
<span class="co">#&gt; 6  study_1_hidden_prev_in_known    0.1194969</span>
<span class="co">#&gt; 7            study_2_frame_size 2521.0000000</span>
<span class="co">#&gt; 8            study_2_known_size  955.0000000</span>
<span class="co">#&gt; 9           study_2_hidden_size  481.0000000</span>
<span class="co">#&gt; 10           study_2_frame_prev    0.5042000</span>
<span class="co">#&gt; 11           study_2_known_prev    0.1910000</span>
<span class="co">#&gt; 12          study_2_hidden_prev    0.0962000</span>
<span class="co">#&gt; 13 study_2_hidden_size_in_frame  269.0000000</span>
<span class="co">#&gt; 14 study_2_hidden_prev_in_frame    0.1067037</span>
<span class="co">#&gt; 15 study_2_hidden_size_in_known  114.0000000</span>
<span class="co">#&gt; 16 study_2_hidden_prev_in_known    0.1193717</span>
<span class="co">#&gt; 17           study_3_known_size  590.0000000</span>
<span class="co">#&gt; 18          study_3_hidden_size  211.0000000</span>
<span class="co">#&gt; 19           study_3_known_prev    0.2950000</span>
<span class="co">#&gt; 20          study_3_hidden_prev    0.1055000</span>
<span class="co">#&gt; 21 study_3_hidden_size_in_known  145.0000000</span>
<span class="co">#&gt; 22 study_3_hidden_prev_in_known    0.2457627</span>
<span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/draw_functions.html">draw_estimates</a></span><span class="op">(</span><span class="va">multi_study</span><span class="op">)</span>
<span class="co">#&gt;                    estimator     estimate           se             inquiry</span>
<span class="co">#&gt; 1      hidden_size_rds_sspse 1.605000e+02 9.753111e+01 study_1_hidden_size</span>
<span class="co">#&gt; 2     hidden_size_rds_chords 7.800000e+01 2.823870e+01 study_1_hidden_size</span>
<span class="co">#&gt; 3      hidden_size_rds_multi 1.309091e+02 6.454313e+01 study_1_hidden_size</span>
<span class="co">#&gt; 4         hidden_size_tls_ht 4.211009e+00 9.546678e-01 study_1_hidden_size</span>
<span class="co">#&gt; 5         hidden_prev_tls_ht 4.211009e-03 9.546678e-04 study_1_hidden_prev</span>
<span class="co">#&gt; 6       hidden_size_tls_nsum 1.064848e+02 3.886880e+00 study_1_hidden_size</span>
<span class="co">#&gt; 7      hidden_size_tls_recap 6.589780e+01 2.827999e+01 study_1_hidden_size</span>
<span class="co">#&gt; 8         hidden_size_pps_ht 8.000000e+01 1.908098e+01 study_1_hidden_size</span>
<span class="co">#&gt; 9         hidden_prev_pps_ht 8.000000e-02 1.908098e-02 study_1_hidden_prev</span>
<span class="co">#&gt; 10      hidden_size_pps_nsum 1.166672e+02 7.370442e+00 study_1_hidden_size</span>
<span class="co">#&gt; 11 hidden_size_rds_pps_recap 7.876923e+01 9.173448e+00 study_1_hidden_size</span>
<span class="co">#&gt; 12 hidden_size_rds_tls_recap 1.330891e+02 1.584432e+01 study_1_hidden_size</span>
<span class="co">#&gt; 13     hidden_size_rds_sspse 4.455000e+02 5.135585e+02 study_2_hidden_size</span>
<span class="co">#&gt; 14    hidden_size_rds_chords 3.620000e+02 1.183849e+02 study_2_hidden_size</span>
<span class="co">#&gt; 15     hidden_size_rds_multi 5.552211e+02 3.551113e+01 study_2_hidden_size</span>
<span class="co">#&gt; 16        hidden_size_tls_ht 4.931919e+01 2.278566e+01 study_2_hidden_size</span>
<span class="co">#&gt; 17        hidden_prev_tls_ht 9.863838e-03 4.557133e-03 study_2_hidden_prev</span>
<span class="co">#&gt; 18      hidden_size_tls_nsum 7.399762e+02 7.900043e+01 study_2_hidden_size</span>
<span class="co">#&gt; 19     hidden_size_tls_recap 6.572491e+01 1.844387e+00 study_2_hidden_size</span>
<span class="co">#&gt; 20        hidden_size_pps_ht 2.574800e+02 2.704909e+01 study_2_hidden_size</span>
<span class="co">#&gt; 21        hidden_prev_pps_ht 5.149600e-02 5.409819e-03 study_2_hidden_prev</span>
<span class="co">#&gt; 22      hidden_size_pps_nsum 2.076163e+02 2.668073e+01 study_2_hidden_size</span>
<span class="co">#&gt; 23 hidden_size_rds_pps_recap 3.982973e+02 4.291845e+01 study_2_hidden_size</span>
<span class="co">#&gt; 24 hidden_size_rds_tls_recap 5.512353e+02 6.314687e+00 study_2_hidden_size</span>
<span class="co">#&gt; 25     hidden_size_rds_sspse 2.020000e+02 5.785078e+01 study_3_hidden_size</span>
<span class="co">#&gt; 26    hidden_size_rds_chords 1.240000e+02 4.652596e+01 study_3_hidden_size</span>
<span class="co">#&gt; 27     hidden_size_rds_multi 1.538462e+02 1.871419e+01 study_3_hidden_size</span>
<span class="co">#&gt; 28        hidden_size_tls_ht 3.246111e+01 4.537535e+00 study_3_hidden_size</span>
<span class="co">#&gt; 29        hidden_prev_tls_ht 1.623056e-02 2.268767e-03 study_3_hidden_prev</span>
<span class="co">#&gt; 30      hidden_size_tls_nsum 4.402019e+02 2.846223e+01 study_3_hidden_size</span>
<span class="co">#&gt; 31     hidden_size_tls_recap 6.692381e+01 4.172684e+00 study_3_hidden_size</span>
<span class="co">#&gt; 32        hidden_size_pps_ht 1.950000e+02 2.857143e+01 study_3_hidden_size</span>
<span class="co">#&gt; 33        hidden_prev_pps_ht 9.750000e-02 1.428571e-02 study_3_hidden_prev</span>
<span class="co">#&gt; 34      hidden_size_pps_nsum 2.901978e+02 1.988183e+01 study_3_hidden_size</span>
<span class="co">#&gt; 35 hidden_size_rds_pps_recap 2.010000e+02 2.791313e+01 study_3_hidden_size</span>
<span class="co">#&gt; 36 hidden_size_rds_tls_recap 1.791636e+02 5.769427e+00 study_3_hidden_size</span></code></pre></div>
</div>
<div id="diagnose-multiple-studies" class="section level3">
<h3 class="hasAnchor">
<a href="#diagnose-multiple-studies" class="anchor"></a>Diagnose multiple studies</h3>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># multi_simulations &lt;- simulate_design(multi_study, sims = 2)</span>

<span class="fu"><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"doParallel"</span>, <span class="st">"parallel"</span><span class="op">)</span><span class="op">)</span>
<span class="fu">doParallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/doParallel/man/registerDoParallel.html">registerDoParallel</a></span><span class="op">(</span>cores <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span>
<span class="va">multi_simulations</span> <span class="op">&lt;-</span>
  <span class="fu">plyr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/llply.html">llply</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/list.html">as.list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>,
    .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
      <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html">suppressWarnings</a></span><span class="op">(</span>
        <span class="fu">DeclareDesign</span><span class="fu">::</span><span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/simulate_design.html">simulate_design</a></span><span class="op">(</span><span class="va">multi_study</span>, sims <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span>
          <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
            sim_ID <span class="op">=</span> <span class="va">x</span>
          <span class="op">)</span>
      <span class="op">)</span>
    <span class="op">}</span>,
    .parallel <span class="op">=</span> <span class="cn">TRUE</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span><span class="va">multi_simulations</span>, file <span class="op">=</span> <span class="st">"vignettes/multi_sim.rds"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">multi_simulations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"vignettes/multi_sim.rds"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/diagnose_design.html">diagnose_design</a></span><span class="op">(</span>simulations_df <span class="op">=</span> <span class="va">multi_simulations</span>, 
                diagnosands <span class="op">=</span> <span class="va">study_diagnosands</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/reshape_diagnosis.html">reshape_diagnosis</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="st">'Design'</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">`Mean Estimate`</span> <span class="op">!=</span> <span class="st">"NA"</span><span class="op">)</span>
<span class="co">#&gt;                Inquiry                 Estimator N Sims Mean Estimand</span>
<span class="co">#&gt; 1  study_1_hidden_prev        hidden_prev_pps_ht    100          0.10</span>
<span class="co">#&gt; 2                                                              (0.00)</span>
<span class="co">#&gt; 3  study_1_hidden_prev        hidden_prev_tls_ht    100          0.10</span>
<span class="co">#&gt; 4                                                              (0.00)</span>
<span class="co">#&gt; 5  study_1_hidden_size        hidden_size_pps_ht    100        197.97</span>
<span class="co">#&gt; 6                                                              (1.54)</span>
<span class="co">#&gt; 7  study_1_hidden_size      hidden_size_pps_nsum    100        197.97</span>
<span class="co">#&gt; 8                                                              (1.54)</span>
<span class="co">#&gt; 9  study_1_hidden_size    hidden_size_rds_chords    100        197.97</span>
<span class="co">#&gt; 10                                                             (1.54)</span>
<span class="co">#&gt; 11 study_1_hidden_size     hidden_size_rds_multi    100        197.97</span>
<span class="co">#&gt; 12                                                             (1.54)</span>
<span class="co">#&gt; 13 study_1_hidden_size hidden_size_rds_pps_recap    100        197.97</span>
<span class="co">#&gt; 14                                                             (1.54)</span>
<span class="co">#&gt; 15 study_1_hidden_size     hidden_size_rds_sspse    100        197.97</span>
<span class="co">#&gt; 16                                                             (1.54)</span>
<span class="co">#&gt; 17 study_1_hidden_size hidden_size_rds_tls_recap    100        197.97</span>
<span class="co">#&gt; 18                                                             (1.54)</span>
<span class="co">#&gt; 19 study_1_hidden_size        hidden_size_tls_ht    100        197.97</span>
<span class="co">#&gt; 20                                                             (1.54)</span>
<span class="co">#&gt; 21 study_1_hidden_size      hidden_size_tls_nsum    100        197.97</span>
<span class="co">#&gt; 22                                                             (1.54)</span>
<span class="co">#&gt; 23 study_1_hidden_size     hidden_size_tls_recap    100        197.97</span>
<span class="co">#&gt; 24                                                             (1.54)</span>
<span class="co">#&gt; 25 study_2_hidden_prev        hidden_prev_pps_ht    100          0.10</span>
<span class="co">#&gt; 26                                                             (0.00)</span>
<span class="co">#&gt; 27 study_2_hidden_prev        hidden_prev_tls_ht    100          0.10</span>
<span class="co">#&gt; 28                                                             (0.00)</span>
<span class="co">#&gt; 29 study_2_hidden_size        hidden_size_pps_ht    100        497.63</span>
<span class="co">#&gt; 30                                                             (1.99)</span>
<span class="co">#&gt; 31 study_2_hidden_size      hidden_size_pps_nsum    100        497.63</span>
<span class="co">#&gt; 32                                                             (1.99)</span>
<span class="co">#&gt; 33 study_2_hidden_size    hidden_size_rds_chords    100        497.63</span>
<span class="co">#&gt; 34                                                             (1.99)</span>
<span class="co">#&gt; 35 study_2_hidden_size     hidden_size_rds_multi    100        497.63</span>
<span class="co">#&gt; 36                                                             (1.99)</span>
<span class="co">#&gt; 37 study_2_hidden_size hidden_size_rds_pps_recap    100        497.63</span>
<span class="co">#&gt; 38                                                             (1.99)</span>
<span class="co">#&gt; 39 study_2_hidden_size     hidden_size_rds_sspse    100        497.63</span>
<span class="co">#&gt; 40                                                             (1.99)</span>
<span class="co">#&gt; 41 study_2_hidden_size hidden_size_rds_tls_recap    100        497.63</span>
<span class="co">#&gt; 42                                                             (1.99)</span>
<span class="co">#&gt; 43 study_2_hidden_size        hidden_size_tls_ht    100        497.63</span>
<span class="co">#&gt; 44                                                             (1.99)</span>
<span class="co">#&gt; 45 study_2_hidden_size      hidden_size_tls_nsum    100        497.63</span>
<span class="co">#&gt; 46                                                             (1.99)</span>
<span class="co">#&gt; 47 study_2_hidden_size     hidden_size_tls_recap    100        497.63</span>
<span class="co">#&gt; 48                                                             (1.99)</span>
<span class="co">#&gt; 49 study_3_hidden_prev        hidden_prev_pps_ht    100          0.10</span>
<span class="co">#&gt; 50                                                             (0.00)</span>
<span class="co">#&gt; 51 study_3_hidden_prev        hidden_prev_tls_ht    100          0.10</span>
<span class="co">#&gt; 52                                                             (0.00)</span>
<span class="co">#&gt; 53 study_3_hidden_size        hidden_size_pps_ht    100        198.27</span>
<span class="co">#&gt; 54                                                             (1.19)</span>
<span class="co">#&gt; 55 study_3_hidden_size      hidden_size_pps_nsum    100        198.27</span>
<span class="co">#&gt; 56                                                             (1.19)</span>
<span class="co">#&gt; 57 study_3_hidden_size    hidden_size_rds_chords    100        198.27</span>
<span class="co">#&gt; 58                                                             (1.19)</span>
<span class="co">#&gt; 59 study_3_hidden_size     hidden_size_rds_multi    100        198.27</span>
<span class="co">#&gt; 60                                                             (1.19)</span>
<span class="co">#&gt; 61 study_3_hidden_size hidden_size_rds_pps_recap    100        198.27</span>
<span class="co">#&gt; 62                                                             (1.19)</span>
<span class="co">#&gt; 63 study_3_hidden_size     hidden_size_rds_sspse    100        198.27</span>
<span class="co">#&gt; 64                                                             (1.19)</span>
<span class="co">#&gt; 65 study_3_hidden_size hidden_size_rds_tls_recap    100        198.27</span>
<span class="co">#&gt; 66                                                             (1.19)</span>
<span class="co">#&gt; 67 study_3_hidden_size        hidden_size_tls_ht    100        198.27</span>
<span class="co">#&gt; 68                                                             (1.19)</span>
<span class="co">#&gt; 69 study_3_hidden_size      hidden_size_tls_nsum    100        198.27</span>
<span class="co">#&gt; 70                                                             (1.19)</span>
<span class="co">#&gt; 71 study_3_hidden_size     hidden_size_tls_recap    100        198.27</span>
<span class="co">#&gt; 72                                                             (1.19)</span>
<span class="co">#&gt;    Mean Estimate SD Estimate Mean Se    Bias    RMSE</span>
<span class="co">#&gt; 1           0.10        0.02    0.01   -0.00    0.01</span>
<span class="co">#&gt; 2         (0.00)      (0.00)  (0.00)  (0.00)  (0.00)</span>
<span class="co">#&gt; 3           0.02        0.00    0.00   -0.08    0.08</span>
<span class="co">#&gt; 4         (0.00)      (0.00)  (0.00)  (0.00)  (0.00)</span>
<span class="co">#&gt; 5         193.35       30.89   29.53   -4.62   24.71</span>
<span class="co">#&gt; 6         (3.19)      (2.75)  (0.30)  (2.47)  (1.82)</span>
<span class="co">#&gt; 7         279.14       33.59   19.84   81.17   84.20</span>
<span class="co">#&gt; 8         (3.31)      (2.42)  (0.20)  (2.13)  (2.24)</span>
<span class="co">#&gt; 9         135.47       49.91   48.94  -62.50   81.34</span>
<span class="co">#&gt; 10        (5.04)      (4.47)  (0.75)  (5.30)  (3.52)</span>
<span class="co">#&gt; 11        200.83       27.78   33.30    2.86   24.07</span>
<span class="co">#&gt; 12        (2.93)      (2.63)  (0.99)  (2.57)  (2.13)</span>
<span class="co">#&gt; 13        194.08       36.84   26.61   -3.89   33.07</span>
<span class="co">#&gt; 14        (3.97)      (6.96)  (1.29)  (3.46)  (5.96)</span>
<span class="co">#&gt; 15        215.03       30.65   86.46   17.06   39.76</span>
<span class="co">#&gt; 16        (3.11)      (1.89)  (2.35)  (3.74)  (2.75)</span>
<span class="co">#&gt; 17        198.25       16.19    6.65    0.28    6.98</span>
<span class="co">#&gt; 18        (1.82)      (1.16)  (0.11)  (0.73)  (0.48)</span>
<span class="co">#&gt; 19         37.23        5.52    4.41 -160.74  161.37</span>
<span class="co">#&gt; 20        (0.57)      (0.30)  (0.06)  (1.44)  (1.42)</span>
<span class="co">#&gt; 21        435.88       40.33   23.04  237.91  240.08</span>
<span class="co">#&gt; 22        (3.85)      (2.92)  (1.25)  (3.11)  (3.15)</span>
<span class="co">#&gt; 23         77.38        9.57    4.67 -120.59  121.37</span>
<span class="co">#&gt; 24        (1.07)      (0.56)  (0.11)  (1.29)  (1.26)</span>
<span class="co">#&gt; 25          0.06        0.01    0.01   -0.04    0.04</span>
<span class="co">#&gt; 26        (0.00)      (0.00)  (0.00)  (0.00)  (0.00)</span>
<span class="co">#&gt; 27          0.01        0.00    0.00   -0.09    0.09</span>
<span class="co">#&gt; 28        (0.00)      (0.00)  (0.00)  (0.00)  (0.00)</span>
<span class="co">#&gt; 29        283.39       25.43   27.63 -214.24  215.88</span>
<span class="co">#&gt; 30        (2.58)      (1.98)  (0.24)  (2.51)  (2.47)</span>
<span class="co">#&gt; 31        200.92       29.01   25.72 -296.71  297.93</span>
<span class="co">#&gt; 32        (2.94)      (2.68)  (0.32)  (2.53)  (2.47)</span>
<span class="co">#&gt; 33        224.92      209.24  146.13 -272.71  341.23</span>
<span class="co">#&gt; 34       (19.99)     (21.97)  (3.61) (19.48) (12.17)</span>
<span class="co">#&gt; 35        499.94       38.52   34.90    2.31   32.94</span>
<span class="co">#&gt; 36        (3.74)      (3.88)  (0.54)  (3.30)  (2.67)</span>
<span class="co">#&gt; 37        502.68       70.65   64.67    5.05   63.82</span>
<span class="co">#&gt; 38        (6.80)      (4.82)  (1.55)  (5.87)  (4.34)</span>
<span class="co">#&gt; 39       1412.37      814.71  315.04  914.74 1224.20</span>
<span class="co">#&gt; 40       (82.72)     (24.30) (21.86) (82.95) (56.26)</span>
<span class="co">#&gt; 41        497.73       21.68    5.72    0.10    6.26</span>
<span class="co">#&gt; 42        (2.11)      (1.83)  (0.04)  (0.64)  (0.44)</span>
<span class="co">#&gt; 43         53.44        6.68   23.24 -444.19  444.64</span>
<span class="co">#&gt; 44        (0.65)      (0.57)  (0.46)  (1.96)  (1.98)</span>
<span class="co">#&gt; 45        608.92      102.88   83.07  111.29  145.94</span>
<span class="co">#&gt; 46        (9.05)      (6.57)  (2.91)  (8.43)  (6.92)</span>
<span class="co">#&gt; 47         69.10        7.00    1.75 -428.53  429.02</span>
<span class="co">#&gt; 48        (0.70)      (0.49)  (0.03)  (2.00)  (2.02)</span>
<span class="co">#&gt; 49          0.10        0.02    0.01    0.00    0.01</span>
<span class="co">#&gt; 50        (0.00)      (0.00)  (0.00)  (0.00)  (0.00)</span>
<span class="co">#&gt; 51          0.02        0.00    0.00   -0.08    0.08</span>
<span class="co">#&gt; 52        (0.00)      (0.00)  (0.00)  (0.00)  (0.00)</span>
<span class="co">#&gt; 53        203.30       31.00   29.68    5.03   29.88</span>
<span class="co">#&gt; 54        (3.20)      (2.16)  (0.30)  (3.12)  (2.10)</span>
<span class="co">#&gt; 55        287.12       30.74   20.04   88.85   92.38</span>
<span class="co">#&gt; 56        (3.07)      (2.12)  (0.23)  (2.58)  (2.69)</span>
<span class="co">#&gt; 57        142.37       60.63   46.76  -55.90   82.89</span>
<span class="co">#&gt; 58        (5.84)      (3.76)  (0.66)  (5.93)  (3.59)</span>
<span class="co">#&gt; 59        198.45       22.55   33.73    0.18   19.24</span>
<span class="co">#&gt; 60        (2.20)      (1.34)  (0.73)  (1.90)  (1.27)</span>
<span class="co">#&gt; 61        194.45       21.97   25.82   -3.82   22.30</span>
<span class="co">#&gt; 62        (2.17)      (1.73)  (0.66)  (2.31)  (1.72)</span>
<span class="co">#&gt; 63        211.68       31.73   80.10   13.41   38.70</span>
<span class="co">#&gt; 64        (2.97)      (2.27)  (2.51)  (3.39)  (2.46)</span>
<span class="co">#&gt; 65        198.51       14.03    6.55    0.24    6.73</span>
<span class="co">#&gt; 66        (1.36)      (1.08)  (0.08)  (0.59)  (0.56)</span>
<span class="co">#&gt; 67         37.88        6.01    4.49 -160.39  160.73</span>
<span class="co">#&gt; 68        (0.56)      (0.43)  (0.05)  (1.10)  (1.11)</span>
<span class="co">#&gt; 69        431.78       37.01   20.59  233.51  235.62</span>
<span class="co">#&gt; 70        (3.71)      (2.44)  (1.08)  (3.20)  (3.20)</span>
<span class="co">#&gt; 71         77.27        9.46    4.61 -121.00  121.50</span>
<span class="co">#&gt; 72        (0.86)      (0.68)  (0.08)  (1.13)  (1.14)</span></code></pre></div>
</div>
</div>
<div id="meta-analysis-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#meta-analysis-structure" class="anchor"></a>Meta-analysis structure</h2>
<ol>
<li><p>Conduct multi-study design for as many sampling-estimator pairs in each study as possible, then diagnose the multi-study design. Calculate average (across simulations) estimand and bias of sampling-estimator for each of the studies and estimator sampling strategies. These will serve as population we will be drawing population-sampling-estimator triads</p></li>
<li>
<p>Estimands include:</p>
<ul>
<li>Average estimand by inquiry label (within study)</li>
<li>Average bias of specific sampling-estimator pair (across studies) compared to truth</li>
<li>Average relative bias of sampling-estimator pair (across studies) compared to “gold standard”</li>
<li>Ratio of average bias to costs of sampling-estimator pair</li>
</ul>
</li>
<li><p>As mentioned before sampling will consist of drawing population-sampling-estimator triads from the population presuming that each study uses at least two sampling strategies at a time</p></li>
<li><p>Once we draw sample we use Stan model to estimate study-specific estimands and sampling-estimator specific errors (biases)</p></li>
<li><p>We have all parts to conduct the full cycle of meta-analyses</p></li>
</ol>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">meta_population</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_population.html">declare_population</a></span><span class="op">(</span>multi_design <span class="op">=</span> <span class="va">multi_study</span>, n_sim <span class="op">=</span> <span class="fl">3</span>, parallel <span class="op">=</span> <span class="cn">FALSE</span>, 
                     handler <span class="op">=</span> <span class="va">get_meta_population</span><span class="op">)</span>

<span class="va">meta_inquiry</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_inquiry.html">declare_inquiry</a></span><span class="op">(</span>study_estimand <span class="op">=</span> <span class="st">"hidden_size"</span>,
                  samp_est_benchmark <span class="op">=</span> <span class="st">"pps_ht"</span>, 
                  handler <span class="op">=</span> <span class="va">get_meta_estimands</span><span class="op">)</span>

<span class="va">meta_sample</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_sampling.html">declare_sampling</a></span><span class="op">(</span>sampling_variable <span class="op">=</span> <span class="st">"meta"</span>,
                   selection_variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"sample"</span>, <span class="st">"estimator"</span><span class="op">)</span>,
                   samples_per_study <span class="op">=</span> <span class="fl">2</span>, estimator_per_sample <span class="op">=</span> <span class="fl">3</span>, 
                   force <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="st">"pps"</span>, estimator <span class="op">=</span> <span class="st">"ht"</span><span class="op">)</span>,
                   handler <span class="op">=</span> <span class="va">get_meta_sample</span><span class="op">)</span>

<span class="va">meta_estimator</span> <span class="op">&lt;-</span> 
  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_estimator.html">declare_estimator</a></span><span class="op">(</span>sampling_variable <span class="op">=</span> <span class="st">"meta"</span>,
                    which_estimand <span class="op">=</span> <span class="st">"hidden_size"</span>,
                    benchmark <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="st">"pps"</span>, estimator <span class="op">=</span> <span class="st">"ht"</span><span class="op">)</span>,
                    parallel <span class="op">=</span> <span class="cn">FALSE</span>,
                    stan_handler <span class="op">=</span> <span class="va">get_meta_stan</span>,
                    handler <span class="op">=</span> <span class="va">get_meta_estimates</span><span class="op">)</span>

<span class="va">meta_study</span> <span class="op">&lt;-</span> <span class="va">meta_population</span> <span class="op">+</span> <span class="va">meta_inquiry</span> <span class="op">+</span> <span class="va">meta_sample</span> <span class="op">+</span> <span class="va">meta_estimator</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span>
<span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/draw_functions.html">draw_estimands</a></span><span class="op">(</span><span class="va">meta_study</span><span class="op">)</span>
<span class="co">#&gt;                      inquiry      estimand</span>
<span class="co">#&gt; 1                bias_pps_ht  -75.57513889</span>
<span class="co">#&gt; 2              bias_pps_nsum  -71.47930727</span>
<span class="co">#&gt; 3            bias_rds_chords -109.55555556</span>
<span class="co">#&gt; 4             bias_rds_multi    6.04333120</span>
<span class="co">#&gt; 5         bias_rds_pps_recap   -8.15177122</span>
<span class="co">#&gt; 6             bias_rds_sspse  457.11111111</span>
<span class="co">#&gt; 7         bias_rds_tls_recap    0.93781976</span>
<span class="co">#&gt; 8             bias_sd_pps_ht  123.42649772</span>
<span class="co">#&gt; 9           bias_sd_pps_nsum  214.88331248</span>
<span class="co">#&gt; 10        bias_sd_rds_chords  165.38393973</span>
<span class="co">#&gt; 11         bias_sd_rds_multi   25.86888492</span>
<span class="co">#&gt; 12     bias_sd_rds_pps_recap   34.00018599</span>
<span class="co">#&gt; 13         bias_sd_rds_sspse  710.62768467</span>
<span class="co">#&gt; 14     bias_sd_rds_tls_recap    2.62627507</span>
<span class="co">#&gt; 15            bias_sd_tls_ht  183.36850717</span>
<span class="co">#&gt; 16          bias_sd_tls_nsum  124.44266073</span>
<span class="co">#&gt; 17         bias_sd_tls_recap  195.77162158</span>
<span class="co">#&gt; 18               bias_tls_ht -233.04254045</span>
<span class="co">#&gt; 19             bias_tls_nsum  124.62504782</span>
<span class="co">#&gt; 20            bias_tls_recap -203.36171786</span>
<span class="co">#&gt; 21           rel_bias_pps_ht    1.00000000</span>
<span class="co">#&gt; 22         rel_bias_pps_nsum    0.93688797</span>
<span class="co">#&gt; 23       rel_bias_rds_chords    1.47826256</span>
<span class="co">#&gt; 24        rel_bias_rds_multi   -0.05684819</span>
<span class="co">#&gt; 25    rel_bias_rds_pps_recap    0.12822462</span>
<span class="co">#&gt; 26        rel_bias_rds_sspse   -5.92939006</span>
<span class="co">#&gt; 27    rel_bias_rds_tls_recap   -0.01214965</span>
<span class="co">#&gt; 28        rel_bias_sd_pps_ht    1.00000000</span>
<span class="co">#&gt; 29      rel_bias_sd_pps_nsum    1.75370491</span>
<span class="co">#&gt; 30    rel_bias_sd_rds_chords    1.33026925</span>
<span class="co">#&gt; 31     rel_bias_sd_rds_multi    0.20081032</span>
<span class="co">#&gt; 32 rel_bias_sd_rds_pps_recap    0.27076736</span>
<span class="co">#&gt; 33     rel_bias_sd_rds_sspse    5.96938573</span>
<span class="co">#&gt; 34 rel_bias_sd_rds_tls_recap    0.02078051</span>
<span class="co">#&gt; 35        rel_bias_sd_tls_ht    1.50343075</span>
<span class="co">#&gt; 36      rel_bias_sd_tls_nsum    1.02050114</span>
<span class="co">#&gt; 37     rel_bias_sd_tls_recap    1.60349425</span>
<span class="co">#&gt; 38           rel_bias_tls_ht    3.12801152</span>
<span class="co">#&gt; 39         rel_bias_tls_nsum   -1.67607954</span>
<span class="co">#&gt; 40        rel_bias_tls_recap    2.72985805</span>
<span class="co">#&gt; 41       study_1_hidden_size   94.66666667</span>
<span class="co">#&gt; 42       study_2_hidden_size  490.33333333</span>
<span class="co">#&gt; 43       study_3_hidden_size  209.33333333</span>
<span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/draw_functions.html">draw_estimates</a></span><span class="op">(</span><span class="va">meta_study</span><span class="op">)</span>
<span class="co">#&gt;                      estimator    estimate          se                inquiry</span>
<span class="co">#&gt; 1         rel_bias_pps_ht_meta   1.0000000  0.00000000        rel_bias_pps_ht</span>
<span class="co">#&gt; 2      rel_bias_rds_sspse_meta   9.0255787  0.96829395     rel_bias_rds_sspse</span>
<span class="co">#&gt; 3      rel_bias_rds_multi_meta   2.0092177  0.51220527     rel_bias_rds_multi</span>
<span class="co">#&gt; 4       rel_bias_pps_nsum_meta   1.2651668  0.13074009      rel_bias_pps_nsum</span>
<span class="co">#&gt; 5  rel_bias_rds_pps_recap_meta   2.0172260  0.28396824 rel_bias_rds_pps_recap</span>
<span class="co">#&gt; 6     rel_bias_rds_chords_meta   0.7451670  0.47353706    rel_bias_rds_chords</span>
<span class="co">#&gt; 7         rel_bias_tls_ht_meta   0.2008796  0.02908356        rel_bias_tls_ht</span>
<span class="co">#&gt; 8      rel_bias_tls_recap_meta   0.3716098  0.04257755     rel_bias_tls_recap</span>
<span class="co">#&gt; 9                 study_1_meta  68.6466563 15.11191777    study_1_hidden_size</span>
<span class="co">#&gt; 10                study_2_meta 363.3712115 73.25944316    study_2_hidden_size</span>
<span class="co">#&gt; 11                study_3_meta 308.6784268 63.88872797    study_3_hidden_size</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"doParallel"</span>, <span class="st">"parallel"</span><span class="op">)</span><span class="op">)</span>
<span class="fu">doParallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/doParallel/man/registerDoParallel.html">registerDoParallel</a></span><span class="op">(</span>cores <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">872312</span><span class="op">)</span>
<span class="va">meta_simulations</span> <span class="op">&lt;-</span>
  <span class="fu">plyr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/llply.html">llply</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/list.html">as.list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>,
    .fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
      <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/warning.html">suppressWarnings</a></span><span class="op">(</span>
        <span class="fu">DeclareDesign</span><span class="fu">::</span><span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/simulate_design.html">simulate_design</a></span><span class="op">(</span><span class="va">meta_study</span>, sims <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span>
          <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>
            sim_ID <span class="op">=</span> <span class="va">x</span>
          <span class="op">)</span>
      <span class="op">)</span>
    <span class="op">}</span>,
    .parallel <span class="op">=</span> <span class="cn">TRUE</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span><span class="va">meta_simulations</span>, file <span class="op">=</span> <span class="st">"vignettes/meta_sim.rds"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">meta_simulations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"vignettes/meta_sim.rds"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/diagnose_design.html">diagnose_design</a></span><span class="op">(</span>simulations_df <span class="op">=</span> <span class="va">meta_simulations</span>, 
                diagnosands <span class="op">=</span> <span class="va">study_diagnosands</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/reshape_diagnosis.html">reshape_diagnosis</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="st">'Design'</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">`Mean Estimate`</span> <span class="op">!=</span> <span class="st">"NA"</span><span class="op">)</span>
<span class="co">#&gt;                   Inquiry                   Estimator N Sims Mean Estimand</span>
<span class="co">#&gt; 1         rel_bias_pps_ht        rel_bias_pps_ht_meta    100          1.00</span>
<span class="co">#&gt; 2                                                                   (0.00)</span>
<span class="co">#&gt; 3       rel_bias_pps_nsum      rel_bias_pps_nsum_meta    100          0.61</span>
<span class="co">#&gt; 4                                                                   (0.01)</span>
<span class="co">#&gt; 5     rel_bias_rds_chords    rel_bias_rds_chords_meta     65          2.05</span>
<span class="co">#&gt; 6                                                                   (0.07)</span>
<span class="co">#&gt; 7      rel_bias_rds_multi     rel_bias_rds_multi_meta     76         -0.04</span>
<span class="co">#&gt; 8                                                                   (0.02)</span>
<span class="co">#&gt; 9  rel_bias_rds_pps_recap rel_bias_rds_pps_recap_meta     88          0.00</span>
<span class="co">#&gt; 10                                                                  (0.02)</span>
<span class="co">#&gt; 11     rel_bias_rds_sspse     rel_bias_rds_sspse_meta     71         -4.88</span>
<span class="co">#&gt; 12                                                                  (0.29)</span>
<span class="co">#&gt; 13        rel_bias_tls_ht        rel_bias_tls_ht_meta     85          3.77</span>
<span class="co">#&gt; 14                                                                  (0.06)</span>
<span class="co">#&gt; 15      rel_bias_tls_nsum      rel_bias_tls_nsum_meta     72         -2.87</span>
<span class="co">#&gt; 16                                                                  (0.06)</span>
<span class="co">#&gt; 17     rel_bias_tls_recap     rel_bias_tls_recap_meta     69          3.34</span>
<span class="co">#&gt; 18                                                                  (0.06)</span>
<span class="co">#&gt; 19    study_1_hidden_size                study_1_meta    100        201.22</span>
<span class="co">#&gt; 20                                                                  (0.78)</span>
<span class="co">#&gt; 21    study_2_hidden_size                study_2_meta    100        500.18</span>
<span class="co">#&gt; 22                                                                  (1.28)</span>
<span class="co">#&gt; 23    study_3_hidden_size                study_3_meta    100        199.64</span>
<span class="co">#&gt; 24                                                                  (0.62)</span>
<span class="co">#&gt;    Mean Estimate SD Estimate Mean Se    Bias   RMSE</span>
<span class="co">#&gt; 1           1.00        0.00    0.00    0.00   0.00</span>
<span class="co">#&gt; 2         (0.00)      (0.00)  (0.00)  (0.00) (0.00)</span>
<span class="co">#&gt; 3           1.19        0.08    0.11    0.58   0.60</span>
<span class="co">#&gt; 4         (0.01)      (0.00)  (0.00)  (0.02) (0.02)</span>
<span class="co">#&gt; 5           0.79        0.44    0.31   -1.26   1.51</span>
<span class="co">#&gt; 6         (0.05)      (0.09)  (0.02)  (0.10) (0.08)</span>
<span class="co">#&gt; 7           1.43        0.62    0.20    1.47   1.60</span>
<span class="co">#&gt; 8         (0.07)      (0.05)  (0.01)  (0.07) (0.08)</span>
<span class="co">#&gt; 9           1.30        0.62    0.19    1.29   1.46</span>
<span class="co">#&gt; 10        (0.06)      (0.08)  (0.01)  (0.07) (0.10)</span>
<span class="co">#&gt; 11          2.54        2.93    0.62    7.42   8.39</span>
<span class="co">#&gt; 12        (0.31)      (0.33)  (0.06)  (0.46) (0.55)</span>
<span class="co">#&gt; 13          0.18        0.04    0.03   -3.59   3.64</span>
<span class="co">#&gt; 14        (0.00)      (0.00)  (0.00)  (0.06) (0.06)</span>
<span class="co">#&gt; 15          2.29        0.66    0.31    5.16   5.23</span>
<span class="co">#&gt; 16        (0.07)      (0.07)  (0.02)  (0.09) (0.10)</span>
<span class="co">#&gt; 17          0.35        0.06    0.04   -2.99   3.05</span>
<span class="co">#&gt; 18        (0.01)      (0.01)  (0.00)  (0.06) (0.07)</span>
<span class="co">#&gt; 19        298.41       42.85   56.96   97.19 106.02</span>
<span class="co">#&gt; 20        (4.84)      (4.68)  (0.84)  (4.75) (3.70)</span>
<span class="co">#&gt; 21        315.06       40.97   60.17 -185.12 189.30</span>
<span class="co">#&gt; 22        (4.10)      (2.47)  (0.72)  (3.60) (3.48)</span>
<span class="co">#&gt; 23        298.24       46.64   56.88   98.60 108.64</span>
<span class="co">#&gt; 24        (4.74)      (4.99)  (0.79)  (4.61) (3.33)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/gerasy1987/hiddenmeta/">https://​github.com/​gerasy1987/​hiddenmeta/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/gerasy1987/hiddenmeta/issues">https://​github.com/​gerasy1987/​hiddenmeta/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Georgiy Syunyaev <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-4391-6313" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Macartan Humphreys <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-7029-2326" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Georgiy Syunyaev, Macartan Humphreys.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
